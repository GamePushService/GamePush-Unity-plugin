(self.webpackChunkgame_score_sdk=self.webpackChunkgame_score_sdk||[]).push([[433],{1017:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});var r=i(2616),n=i.n(r)()((function(t){return t[1]}));n.push([t.id,".gp-crazy-games-sticky{display:flex;justify-content:center;position:fixed;left:50%;transform:translateX(-50%);z-index:1000;overflow:hidden}.gp-crazy-games-sticky__creative{position:relative;width:100%;height:100%}.gp-crazy-games-sticky_top{top:0}.gp-crazy-games-sticky_bottom{bottom:0}",""]);const s=n},4340:(t,e,i)=>{"use strict";i.d(e,{D:()=>r});const r=()=>Promise.resolve({success:!1,rating:0,error:""})},5572:(t,e,i)=>{"use strict";i.d(e,{VK:()=>r,yl:()=>n});const r={success:!0,payload:{}},n={success:!1,payload:{}}},9482:(t,e,i)=>{"use strict";function r(t){return`${t}px`}i.d(e,{bH:()=>s,Bi:()=>d,Go:()=>c,px:()=>r,sO:()=>o,pm:()=>a});const n={PX:"px",PERCENT:"%"};function s(t){return n[t]}function o(t){a(t.sticky)}function a(t){t&&(t.$el.style.width=`${function(t){let e=window.innerWidth;if("PX"===t.options.maxWidthDimension&&t.options.maxWidth>0&&window.innerWidth>t.options.maxWidth)e=t.options.maxWidth;else if("PERCENT"===t.options.maxWidthDimension&&t.options.maxWidth>0){const i=t.options.maxWidth/100*window.innerWidth;window.innerWidth>t.options.maxWidth&&(e=i)}const i=t.options.fitCanvas&&h()||e;return Math.round(i)}(t)}px`)}function c(t,e){const i=e?{value:t.options.maxWidth,dimension:t.options.maxWidthDimension}:t.options.desktopMaxWidth&&t.options.desktopMaxWidthDimension?{value:t.options.desktopMaxWidth,dimension:t.options.desktopMaxWidthDimension}:{value:t.options.maxWidth,dimension:t.options.maxWidthDimension},r="PERCENT"===i.dimension?.01*i.value*window.innerWidth:i.value;return Math.min(Math.round(t.options.fitCanvas&&h()||r),window.innerWidth)||window.innerWidth}function d(t,e,i){const r=e?{value:t.options.maxHeight,dimension:t.options.maxHeightDimension}:t.options.desktopMaxHeight&&t.options.desktopMaxHeightDimension?{value:t.options.desktopMaxHeight,dimension:t.options.desktopMaxHeightDimension}:{value:t.options.maxHeight,dimension:t.options.maxHeightDimension},n="PERCENT"===r.dimension?.01*r.value*window.innerHeight:r.value;return Math.min(Math.round(n),window.innerHeight)||i}function h(){var t;return window.innerWidth>=640&&(null===(t=document.querySelector("canvas"))||void 0===t?void 0:t.offsetWidth)||0}},2712:(t,e,i)=>{"use strict";i.d(e,{aD:()=>l,FU:()=>p,hc:()=>m});const r=(t,e)=>({type:t,getLink:e}),n=r("facebook",(t=>`//www.facebook.com/sharer/sharer.php?u=${t.url}`)),s=r("whatsapp",(t=>`//api.whatsapp.com/send?text=${t.text}%20${t.url}`)),o=r("telegram",(t=>`//t.me/share/url?url=${t.url}&text=${t.text}`)),a=r("vkontakte",(t=>`//vk.com/share.php?url=${t.url}&title=${t.text}&image=${t.image}`)),c=r("twitter",(t=>`//twitter.com/share?text=${t.text}&url=${t.url}`)),d=r("odnoklassniki",(t=>`//connect.ok.ru/offer?url=${t.url}&title=${t.text}&imageUrl=${t.image}`)),h=r("viber",(t=>`viber://forward?text=${t.text}%20${t.url}`)),u=r("moymir",(t=>`//connect.mail.ru/share?url=${t.url}&title=${t.text}&image_url=${t.image}`)),l=[s,o,a,d,h,u],p=[n,c,o,s,h],m=[n,c,o,s,h,a,d,u]},209:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});var r=i(6558);const n={stringify:t=>btoa(encodeURIComponent(JSON.stringify(t))),parse(t){if(!t)return{};const e=function(t){try{return JSON.parse(decodeURIComponent(atob(t)||"{}"))}catch(t){return""}}(t);return Object.keys(e).length>0?e:JSON.parse(function(t){try{return JSON.parse(atob(t)||"{}")}catch(t){return""}}(t)||"{}")},addShareParamsToUrl(t,e){try{const i=new URL(t);return Object.entries(e).forEach((([t,e])=>{i.searchParams.set(t,e)})),i.href}catch(e){r.kg.error("Invalid URL",t,e)}return t}}},346:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>C});var r=i(8293),n=function(t,e,i,r){return new(i||(i=Promise))((function(n,s){function o(t){try{c(r.next(t))}catch(t){s(t)}}function a(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((r=r.apply(t,e||[])).next())}))};class s{constructor(t){this.sdk=t,this.isStickyAvailable=!0,this.stickyBannerConfig={isOverlapping:!1,height:0},this.isFullscreenAvailable=!0,this.isRewardedAvailable=!0,this.isPreloaderAvailable=!0,this.canShowFullscreenBeforeGamePlay=!0,this.needToLeaveFullscreenBeforeAds=!1}showPreloader(){return n(this,void 0,void 0,(function*(){return yield this.sdk.ready,this.sdk.showPreloader().catch((()=>!1))}))}showFullscreen(){return n(this,void 0,void 0,(function*(){return yield this.sdk.ready,this.sdk.showFullscreen().catch((()=>!1))}))}showRewardedVideo(){return n(this,void 0,void 0,(function*(){return yield this.sdk.ready,this.sdk.showRewardedVideo().catch((()=>!1))}))}showSticky(t){return n(this,void 0,void 0,(function*(){const e=(0,r._)();return this.sdk.app.banners.sticky?(e.done(!0),e.ready):(this.sdk.app.createSticky(t),yield this.sdk.crazysdk.banner.requestResponsiveBanner("responsive-banner-container"),e.done(!0),e.ready)}))}refreshSticky(t){return n(this,void 0,void 0,(function*(){if(!this.sdk.app.banners.sticky)return this.showSticky(t);const e=(0,r._)();return yield this.sdk.crazysdk.banner.requestResponsiveBanner("responsive-banner-container"),e.done(!0),e.ready}))}closeSticky(){return n(this,void 0,void 0,(function*(){yield this.sdk.ready,this.sdk.app.closeSticky()}))}}var o=function(t,e,i,r){return new(i||(i=Promise))((function(n,s){function o(t){try{c(r.next(t))}catch(t){s(t)}}function a(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((r=r.apply(t,e||[])).next())}))};class a{constructor(t){this.sdk=t,this.hasCredetials=!1,this.userId=""}get isAuthorizedAtPlatform(){return this.sdk._isAuthorized}getPlayerAuthInfo(){return o(this,void 0,void 0,(function*(){const t=yield this.sdk.getToken();if("string"!=typeof t||3!==t.split(".").length)throw"cg returned bad token";const e=JSON.parse(atob(t.split(".")[1]));return this.userId=e.userId,this.hasCredetials=Boolean(this.userId),{id:this.userId,token:t}}))}getPlayerContext(){return o(this,void 0,void 0,(function*(){const{id:t,token:e}=yield this.getPlayerAuthInfo();return{platformData:{token:e},key:t}}))}loginPlayer(){return o(this,void 0,void 0,(function*(){return this.sdk.loginPlayer()}))}getPlayer(){return o(this,void 0,void 0,(function*(){return this.sdk.getPlayer()}))}publishRecord(t){}isPlatformAvatar(t){return t.includes("https://images.crazygames.com")}}var c=i(2712),d=i(5942),h=i(5572);class u{constructor(t){this.sdk=t,this.hasIntegratedAuth=!1,this.isExternalLinksAllowed=!0,this.isSecretCodeAuthAvailable=!1,this._hasAuthModal=!0,this.type=d.z.CRAZY_GAMES,this.socialNetworks=c.FU,this.isSupportsImageUploading=!1,this.hasAccountLinkingFeature=!0,this.hasIntegratedAuth=this.sdk.isUserAccountAvailable}getSDK(){return this.sdk}getNativeSDK(){return this.sdk.crazysdk}requestPermissions(){return t=this,e=void 0,r=function*(){return h.VK},new((i=void 0)||(i=Promise))((function(n,s){function o(t){try{c(r.next(t))}catch(t){s(t)}}function a(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((r=r.apply(t,e||[])).next())}));var t,e,i,r}uploadImage(){return null}}class l{constructor(t){this.sdk=t,this.isSupportsShare=!0,this.isSupportsNativeShare=!1,this.isSupportsNativePosts=!1,this.isSupportsNativeInvite=!1,this.isSupportsNativeCommunityJoin=!1,this.canJoinCommunity=!0,this.isSupportShareParams=!0}get shareParams(){return this.sdk.shareParams}share(t){return Promise.resolve(!1)}post(t){return Promise.resolve(!1)}invite(t){return Promise.resolve(!1)}getCommunityLink(t){return t}joinCommunity(){return Promise.resolve(!1)}addShareParamsToUrl(t,e){return this.sdk.addShareParamsToUrl(t,e)}makeShareUrl(t){return this.sdk.makeShareUrl(t)}getShareParam(t){return this.sdk.getShareParam(t)}}var p=i(4917),m=i(6558),y=i(4943),v=i.n(y),f=i(9482),g=i(3379),k=i.n(g),w=i(1017);k()(w.Z,{insert:"head",singleton:!1}),w.Z.locals;var x=i(209),P=function(t,e,i,r){return new(i||(i=Promise))((function(n,s){function o(t){try{c(r.next(t))}catch(t){s(t)}}function a(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((r=r.apply(t,e||[])).next())}))};class S{constructor(t,e){this.gp=t,this.config=e,this.app=function(){const t=document.createElement("div");t.id="gamepush-crazy-games",document.body.appendChild(t);const e={sticky:null};return window.addEventListener("resize",(()=>(0,f.sO)(e))),{banners:e,createSticky(i){e.sticky||(e.sticky=function(e){const i=v()({tablet:!0,featureDetect:!0}),r=document.createElement("div");r.className=`gp-crazy-games-sticky gp-crazy-games-sticky_${e.position||"bottom"}`;const n=document.createElement("div");n.id="responsive-banner-container",n.className="gp-crazy-games-sticky__creative";const s={$wrapper:r,$el:n,options:e},o=(0,f.Go)(s,i);r.style.maxWidth=(0,f.px)(o),n.style.maxWidth=(0,f.px)(o),n.style.width=(0,f.px)(o);const a=(0,f.Bi)(s,i,90);return r.style.maxHeight=(0,f.px)(a),n.style.maxHeight=(0,f.px)(a),n.style.height=(0,f.px)(a),r.appendChild(n),t.appendChild(r),s}(i))},closeSticky(){e.sticky&&(e.sticky.$wrapper.remove(),e.sticky.$wrapper.innerHTML="",e.sticky=null)}}}(),this.gameUrl="",this.isUserAccountAvailable=!1,this._isAuthorized=!1,this.readyAd=(0,r._)();try{const t=new URL(window.location.href).searchParams.get("_gpParams");t&&(this.shareParams=x.Z.parse(t))}catch(t){m.kg.error(t)}}requestGameUrl(){return P(this,void 0,void 0,(function*(){try{this.gameUrl=yield this.crazysdk.game.inviteLink({})}catch(t){m.kg.error(t)}}))}get appUrl(){return this.gameUrl||this.requestGameUrl(),this.gameUrl}init(){return P(this,void 0,void 0,(function*(){const t=(0,r._)();return this.ready=t.ready,yield(0,p.Z)({src:"https://sdk.crazygames.com/crazygames-sdk-v2.js",check:t=>"CrazyGames"in t}).then((()=>P(this,void 0,void 0,(function*(){this.crazysdk=window.CrazyGames.SDK,yield this.crazysdk.user.isUserAccountAvailable().then((t=>this.isUserAccountAvailable=t)).catch((()=>!1)),this.gp.on("gameplayStart",(()=>this.crazysdk.game.gameplayStart())),this.gp.on("gameplayStop",(()=>this.crazysdk.game.gameplayStop())),this.crazysdk.user.getUser().then((t=>{t&&(this._isAuthorized=!0)})),this.gp.ready.then((()=>{this.gp.achievements.on("unlock",(()=>this.crazysdk.game.happytime()))}))})))).catch(m.kg.error),t.done(this),t.ready}))}getPlayer(){return P(this,void 0,void 0,(function*(){yield this.ready;try{const t=yield this.crazysdk.user.getUser();return{id:t.id,name:t.username,photoLarge:t.profilePictureUrl,photoMedium:t.profilePictureUrl,photoSmall:t.profilePictureUrl}}catch(t){return{id:0,name:"",photoLarge:"",photoMedium:"",photoSmall:""}}}))}loginPlayer(){return P(this,void 0,void 0,(function*(){yield this.ready;const t=yield this.crazysdk.user.showAuthPrompt();return console.log(t),this._isAuthorized=!0,{id:t.id,name:t.username,photoLarge:t.profilePictureUrl,photoMedium:t.profilePictureUrl,photoSmall:t.profilePictureUrl}}))}getToken(){return P(this,void 0,void 0,(function*(){return yield this.ready,yield this.crazysdk.user.getUserToken()}))}showBanner(t){this.readyAd.done(!1),this.readyAd=(0,r._)();try{this.crazysdk.ad.requestAd(t,{adFinished:()=>this.readyAd.done(!0),adError:()=>this.readyAd.done(!1)})}catch(t){this.readyAd.abort(t)}return this.readyAd.ready}showFullscreen(){return this.showBanner("midgame")}showRewardedVideo(){return this.showBanner("rewarded")}showPreloader(){return this.showFullscreen()}addShareParamsToUrl(t,e){return x.Z.addShareParamsToUrl(t,{_gpParams:x.Z.stringify(e)})}makeShareUrl(t){return this.addShareParamsToUrl(this.gp.app.url,t)}getShareParam(t){return this.shareParams?this.shareParams[t]:""}}var A=function(t,e,i,r){return new(i||(i=Promise))((function(n,s){function o(t){try{c(r.next(t))}catch(t){s(t)}}function a(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((r=r.apply(t,e||[])).next())}))};class b{constructor(t){this.sdk=t,this.isSupportsSubscriptions=!1,this.isSupportsPayments=!1,this.isServerValidation=!1}mapProducts(t,e){return A(this,void 0,void 0,(function*(){return e}))}consumeAllExpired(t,e,i){return A(this,void 0,void 0,(function*(){}))}fetchPurchases(){return A(this,void 0,void 0,(function*(){return{payload:{},purchases:[]}}))}purchase(t){return A(this,void 0,void 0,(function*(){return{}}))}consume(t){return A(this,void 0,void 0,(function*(){return{}}))}subscribe(t,e){return A(this,void 0,void 0,(function*(){return{}}))}unsubscribe(t,e){return A(this,void 0,void 0,(function*(){return{}}))}}var U=i(4340);class z{constructor(t){this.sdk=t,this.canAddShortcut=!1,this.canRequestReview=!1,this.isAlreadyReviewed=!1}addShortcut(){return t=this,e=void 0,r=function*(){return!1},new((i=void 0)||(i=Promise))((function(n,s){function o(t){try{c(r.next(t))}catch(t){s(t)}}function a(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}c((r=r.apply(t,e||[])).next())}));var t,e,i,r}requestReview(){return(0,U.D)()}requestGameUrl(){return this.sdk.requestGameUrl()}}function C(t){return e=this,i=void 0,n=function*(){const e=new S(t.gp,{}),[,,i]=yield Promise.all([e.init(),t.setupStorage([]),t.fetchConfig()]),r=new a(e),n=new s(e);return{appAdapter:new z(e),adsAdapter:n,playerAdapter:r,platformAdapter:new u(e),socialsAdapter:new l(e),paymentsAdapter:new b(e),projectConfig:i}},new((r=void 0)||(r=Promise))((function(t,s){function o(t){try{c(n.next(t))}catch(t){s(t)}}function a(t){try{c(n.throw(t))}catch(t){s(t)}}function c(e){var i;e.done?t(e.value):(i=e.value,i instanceof r?i:new r((function(t){t(i)}))).then(o,a)}c((n=n.apply(e,i||[])).next())}));var e,i,r,n}}}]);