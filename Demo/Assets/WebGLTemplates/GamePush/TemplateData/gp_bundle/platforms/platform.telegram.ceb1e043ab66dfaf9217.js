(self.webpackChunkgame_score_sdk=self.webpackChunkgame_score_sdk||[]).push([[9967],{3716:t=>{"use strict";var e=Array.prototype.slice;function r(t){var r,n=e.call(arguments,1);switch(n.length){case 1:throw new Error("Not enough forms");case 2:r=t>1?n[1]:n[0];break;default:r=n[i(t)]}return r.replace(/%d/g,t)}function n(t){return t>1e6?2:(t>1e3&&t<1e6&&/000$/.test(t)&&(t/=1e3),t%10==1&&t%100!=11||/1000$/.test(t.toString())?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)}function i(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2}t.exports=r,t.exports.noun=r,t.exports.verb=function(t){var r=e.call(arguments,1),i=r[n(t)];return i.replace(/%d/g,t)}},4340:(t,e,r)=>{"use strict";r.d(e,{D:()=>n});const n=()=>Promise.resolve({success:!1,rating:0,error:""})},9:(t,e,r)=>{"use strict";r.d(e,{Z:()=>s});var n=r(4340),i=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{c(n.next(t))}catch(t){s(t)}}function a(t){try{c(n.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class s{constructor(){this.canAddShortcut=!1,this.canRequestReview=!1,this.isAlreadyReviewed=!1}addShortcut(){return i(this,void 0,void 0,(function*(){return!1}))}requestReview(){return(0,n.D)()}requestGameUrl(){return i(this,void 0,void 0,(function*(){}))}}},5572:(t,e,r)=>{"use strict";r.d(e,{VK:()=>n,yl:()=>i});const n={success:!0,payload:{}},i={success:!1,payload:{}}},4267:(t,e,r)=>{"use strict";r.d(e,{Z:()=>c});var n=r(6390),i=r(6558),s=r(8293),o=r(209),a=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{c(n.next(t))}catch(t){s(t)}}function a(t){try{c(n.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class c{constructor(t,e){this.gp=t,this.config=e;try{const t=new URL(window.location.href).searchParams.get("_gpParams");t&&(this.shareParams=o.Z.parse(t))}catch(t){i.kg.error(t)}}get appUrl(){return(0,n.T)()}init(){return a(this,void 0,void 0,(function*(){const t=(0,s._)();return this.ready=t.ready,t.done(this),t.ready}))}getPlayer(){return a(this,void 0,void 0,(function*(){const t=(0,s._)();return t.done({id:0,name:"",photoSmall:"",photoMedium:"",photoLarge:""}),t.ready}))}showRewardedVideo(){const t=(0,s._)();return t.done(!1),t.ready}showPreloader(){const t=(0,s._)();return t.done(!1),t.ready}showFullscreen(){const t=(0,s._)();return t.done(!1),t.ready}showSticky(){const t=(0,s._)();return t.done(!1),t.ready}closeSticky(){}refreshSticky(){return this.closeSticky(),this.showSticky()}addShareParamsToUrl(t,e){return o.Z.addShareParamsToUrl(t,{_gpParams:o.Z.stringify(e)})}makeShareUrl(t){return this.addShareParamsToUrl(this.gp.app.url,t)}getShareParam(t){return this.shareParams?this.shareParams[t]:""}}},5103:(t,e,r)=>{"use strict";r.d(e,{Z:()=>n});class n{constructor(t){this.sdk=t,this.isSupportsShare=!0,this.isSupportsNativeShare=!1,this.isSupportsNativePosts=!1,this.isSupportsNativeInvite=!1,this.isSupportsNativeCommunityJoin=!1,this.canJoinCommunity=!0,this.isSupportShareParams=!0}get shareParams(){return this.sdk.shareParams}share(t){return Promise.resolve(!1)}post(t){return Promise.resolve(!1)}invite(t){return Promise.resolve(!1)}joinCommunity(){return Promise.resolve(!1)}getCommunityLink(t){return t}addShareParamsToUrl(t,e){return t}makeShareUrl(t){return this.sdk.makeShareUrl(t)}getShareParam(t){return this.sdk.getShareParam(t)}}},2712:(t,e,r)=>{"use strict";r.d(e,{aD:()=>l,FU:()=>f,hc:()=>v});const n=(t,e)=>({type:t,getLink:e}),i=n("facebook",(t=>`//www.facebook.com/sharer/sharer.php?u=${t.url}`)),s=n("whatsapp",(t=>`//api.whatsapp.com/send?text=${t.text}%20${t.url}`)),o=n("telegram",(t=>`//t.me/share/url?url=${t.url}&text=${t.text}`)),a=n("vkontakte",(t=>`//vk.com/share.php?url=${t.url}&title=${t.text}&image=${t.image}`)),c=n("twitter",(t=>`//twitter.com/share?text=${t.text}&url=${t.url}`)),u=n("odnoklassniki",(t=>`//connect.ok.ru/offer?url=${t.url}&title=${t.text}&imageUrl=${t.image}`)),d=n("viber",(t=>`viber://forward?text=${t.text}%20${t.url}`)),h=n("moymir",(t=>`//connect.mail.ru/share?url=${t.url}&title=${t.text}&image_url=${t.image}`)),l=[s,o,a,u,d,h],f=[i,c,o,s,d],v=[i,c,o,s,d,a,u,h]},6390:(t,e,r)=>{"use strict";function n(){try{return window.top.location.href||location.href}catch(t){return location.href}}r.d(e,{T:()=>n})},209:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(6558);const i={stringify:t=>btoa(encodeURIComponent(JSON.stringify(t))),parse(t){if(!t)return{};const e=function(t){try{return JSON.parse(decodeURIComponent(atob(t)||"{}"))}catch(t){return""}}(t);return Object.keys(e).length>0?e:JSON.parse(function(t){try{return JSON.parse(atob(t)||"{}")}catch(t){return""}}(t)||"{}")},addShareParamsToUrl(t,e){try{const r=new URL(t);return Object.entries(e).forEach((([t,e])=>{r.searchParams.set(t,e)})),r.href}catch(e){n.kg.error("Invalid URL",t,e)}return t}}},9991:(t,e,r)=>{"use strict";function n(t,e=0){return new Promise(((r,n)=>{let i=0;t(window)?r():(i=setInterval((function(){t(window)&&(clearInterval(i),r())}),100),e>0&&setTimeout((()=>{clearInterval(i),n(new Error("Timeout reached"))}),e))}))}r.d(e,{Z:()=>n})},1555:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>Z});var n=r(4917),i=r(6558),s=r(8293),o=r(8866),a=r(1438),c=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{c(n.next(t))}catch(t){s(t)}}function a(t){try{c(n.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};function u(t,e){return c(this,void 0,void 0,(function*(){let r=0;const n=()=>c(this,void 0,void 0,(function*(){try{const r=yield t._services.paymentsService.getPlayerPurchase({projectId:t.projectId,purchaseId:e});if(!0===r.subscribed||r.orderStatus===a.i.Paid)return!0}catch(t){if("internal_error"===t)throw new Error("purchase:error "+t);i.kg.error("error during purchase status check: ",t)}if(r++,r>=12)throw new Error("purchase_timeout");return!1}));for(;r<12;){if(yield n())return!0;yield(0,o.Z)(5e3)}if(r>=12)throw new Error("purchase_timeout");return!1}))}var d=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{c(n.next(t))}catch(t){s(t)}}function a(t){try{c(n.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class h{constructor(t,e){this.gp=t,this.config=e;const r=function(t){if(!(t=t.replace(/^#/,"")).length)return{};if(t.indexOf("=")<0&&t.indexOf("?")<0)return{};var e=t.indexOf("?");return e>=0&&(t=t.substr(e+1)),function(t){var e={};if(!t.length)return e;var r,n,i,s,o=t.split("&");for(r=0;r<o.length;r++)i=l((n=o[r].split("="))[0]),s=null==n[1]?null:l(n[1]),e[i]=s;return e}(t)}(location.hash);this.initData=r.hasOwnProperty("tgWebAppData")?r.tgWebAppData:r["/tgWebAppData"]}get appUrl(){return this.config.platformConfig.gameLink}init(){return d(this,void 0,void 0,(function*(){const t=(0,s._)();this.ready=t.ready;try{yield(0,n.Z)({src:"https://telegram.org/js/telegram-web-app.js",check:t=>"Telegram"in t}),this.tgApi=window.Telegram.WebApp,t.done(this)}catch(e){i.kg.error("Failed to initialize Telegram SDK",e),t.abort(e)}return t.ready}))}getPlayer(){return d(this,void 0,void 0,(function*(){const t=new URLSearchParams(decodeURIComponent(this.initData)),e=JSON.parse(t.get("user"));return{id:e.id||0,name:""!==e.first_name?e.first_name+" "+e.last_name:e.username,photoSmall:"",photoMedium:"",photoLarge:""}}))}getInitData(){return d(this,void 0,void 0,(function*(){return yield this.ready,this.initData}))}loginPlayer(){return d(this,void 0,void 0,(function*(){return!1}))}purchase(t){return d(this,void 0,void 0,(function*(){const e=(0,s._)(),r=yield this.gp._services.paymentsService.purchase({id:t.id,tag:t.tag,payload:{}}),n=r.purchase.payload.invoice_link;return this.tgApi.openInvoice(n,(t=>d(this,void 0,void 0,(function*(){switch(t){case"paid":u(this.gp,r.purchase._id).then(e.done).catch(e.abort);break;case"cancelled":e.abort("User cancelled the purchase");break;case"pending":u(this.gp,r.purchase._id).then(e.done).catch(e.abort);break;default:e.abort("Purchase error")}})))),e.ready}))}}function l(t){try{return t=t.replace(/\+/g,"%20"),decodeURIComponent(t)}catch(e){return t}}var f=r(4267),v=r(9),p=r(5103),y=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{c(n.next(t))}catch(t){s(t)}}function a(t){try{c(n.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class w{constructor(t){this.sdk=t,this.hasCredetials=!1,this.userId=""}getPlayerAuthInfo(){return y(this,void 0,void 0,(function*(){const t=yield this.sdk.getInitData();if(!t)throw"telegram returned empty initData";const{id:e}=yield this.sdk.getPlayer();return this.hasCredetials=!!e,this.userId=e.toString(),{initData:t,id:this.userId}}))}getPlayerContext(){return y(this,void 0,void 0,(function*(){const{id:t,initData:e}=yield this.getPlayerAuthInfo();return{platformData:{id:t,initData:e},key:t}}))}loginPlayer(){return y(this,void 0,void 0,(function*(){return this.sdk.getPlayer()}))}getPlayer(){return y(this,void 0,void 0,(function*(){return this.sdk.getPlayer()}))}logoutPlayer(){return y(this,void 0,void 0,(function*(){return!1}))}publishRecord(t){return y(this,void 0,void 0,(function*(){}))}isPlatformAvatar(){return!1}setCredentials(t){}}var g=r(180),m=r(9991),k=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{c(n.next(t))}catch(t){s(t)}}function a(t){try{c(n.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class S{constructor(t){this.isStickyAvailable=!0,this.stickyBannerConfig={isOverlapping:!1,height:0},this.isFullscreenAvailable=!0,this.isRewardedAvailable=!0,this.isPreloaderAvailable=!0,this.needToLeaveFullscreenBeforeAds=!1,this.canShowFullscreenBeforeGamePlay=!0,this.init(t)}init(t){return k(this,void 0,void 0,(function*(){const e=(0,s._)();this.ready=e.ready;try{yield(0,n.Z)({src:"https://cdn.tmads.xyz/tmadsSdk.js",check:t=>"TMAds"in t}),yield(0,m.Z)((t=>"Telegram"in t)),this.sdk=window.TMAds,this.sdk.referer="GAMEPUSH",this.sdk.init(t.customAdsConfig.tmAdsAppKey),this.sdk.addCallback("onAdLoadSuccess",(({banner_height:t})=>{this.stickyBannerConfig.height=t,this.stickyTransaction.done(!0)})),this.sdk.addCallback("onAdLoadFail",(()=>{this.stickyTransaction.done(!1)})),e.done(this)}catch(t){throw i.kg.error("Failed to load TMAds SDK",t),e.done(this),t}}))}showFullscreen(){return k(this,void 0,void 0,(function*(){return yield this.sdk.ready,this.sdk.showInterstitialAd().then((()=>!0)).catch((()=>!1))}))}showRewardedVideo(){return k(this,void 0,void 0,(function*(){return yield this.sdk.ready,this.sdk.showRewardedAd().then((()=>!0)).catch((()=>!1))}))}showSticky(t){return k(this,void 0,void 0,(function*(){return yield this.sdk.ready,this.stickyTransaction=(0,s._)(),this.sdk.show(t.position),this.stickyTransaction.ready}))}showPreloader(){return k(this,void 0,void 0,(function*(){return yield this.sdk.ready,this.showFullscreen()}))}refreshSticky(t){return k(this,void 0,void 0,(function*(){return yield this.sdk.ready,yield this.closeSticky(),this.showSticky(t)}))}closeSticky(){return k(this,void 0,void 0,(function*(){return yield this.sdk.ready,this.sdk.hide()}))}}var A=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{c(n.next(t))}catch(t){s(t)}}function a(t){try{c(n.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class b{constructor(){this.isStickyAvailable=!1,this.stickyBannerConfig={isOverlapping:!1,height:0},this.isFullscreenAvailable=!1,this.isRewardedAvailable=!1,this.isPreloaderAvailable=!1,this.needToLeaveFullscreenBeforeAds=!1,this.canShowFullscreenBeforeGamePlay=!0}showPreloader(){return A(this,void 0,void 0,(function*(){return!1}))}showFullscreen(){return A(this,void 0,void 0,(function*(){return!1}))}showRewardedVideo(){return A(this,void 0,void 0,(function*(){return!1}))}showSticky(){return A(this,void 0,void 0,(function*(){return!1}))}refreshSticky(){return A(this,void 0,void 0,(function*(){return!1}))}closeSticky(){return A(this,void 0,void 0,(function*(){}))}}var P=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{c(n.next(t))}catch(t){s(t)}}function a(t){try{c(n.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class x{constructor(t){this.isStickyAvailable=!1,this.stickyBannerConfig={isOverlapping:!1,height:0},this.isFullscreenAvailable=!1,this.isRewardedAvailable=!0,this.isPreloaderAvailable=!1,this.needToLeaveFullscreenBeforeAds=!1,this.canShowFullscreenBeforeGamePlay=!0,this.init(t)}init(t){return P(this,void 0,void 0,(function*(){const e=(0,s._)();this.ready=e.ready;try{yield(0,n.Z)({src:"https://sad.adsgram.ai/js/sad.min.js",check:t=>"Adsgram"in t}),yield(0,m.Z)((t=>"Telegram"in t)),this.sdk=window.Adsgram;const r=t.customAdsConfig.configs.telegram.banners.find((t=>t.type===g.$.REWARDED));r&&(this.rewardedSdk=this.sdk.init({blockId:r.bannerId})),e.done(this)}catch(t){throw i.kg.error("Failed to load TMAds SDK",t),e.done(this),t}}))}showFullscreen(){return P(this,void 0,void 0,(function*(){return!1}))}showRewardedVideo(){return P(this,void 0,void 0,(function*(){return yield this.sdk.ready,!!this.rewardedSdk&&this.rewardedSdk.show().then((t=>t.done)).catch((()=>!1))}))}showSticky(t){return P(this,void 0,void 0,(function*(){return!1}))}showPreloader(){return P(this,void 0,void 0,(function*(){return!1}))}refreshSticky(t){return P(this,void 0,void 0,(function*(){return!1}))}closeSticky(){return P(this,void 0,void 0,(function*(){}))}}var R=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{c(n.next(t))}catch(t){s(t)}}function a(t){try{c(n.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};const C={[g.Fl.TmAds]:t=>new S(t),[g.Fl.Adsgram]:t=>new x(t),none:t=>new b};class T{constructor(t){this.adServerAdapters={},this.bannersAdapters={},this.adServerAdapters={},t.customAdsConfig.configs.telegram.banners.forEach((e=>{this.adServerAdapters[e.adServer]||(this.adServerAdapters[e.adServer]=(C[e.adServer]||C.none)(t)),this.bannersAdapters[e.type]=this.adServerAdapters[e.adServer]}))}get isStickyAvailable(){return this.bannersAdapters[g.$.STICKY].isStickyAvailable}get stickyBannerConfig(){return this.bannersAdapters[g.$.STICKY].stickyBannerConfig}get isFullscreenAvailable(){return this.bannersAdapters[g.$.FULLSCREEN].isFullscreenAvailable}get isRewardedAvailable(){return this.bannersAdapters[g.$.REWARDED].isRewardedAvailable}get isPreloaderAvailable(){return this.bannersAdapters[g.$.PRELOADER].isPreloaderAvailable}get needToLeaveFullscreenBeforeAds(){return this.bannersAdapters[g.$.FULLSCREEN].needToLeaveFullscreenBeforeAds}get canShowFullscreenBeforeGamePlay(){return this.bannersAdapters[g.$.FULLSCREEN].canShowFullscreenBeforeGamePlay}showPreloader(t){return R(this,void 0,void 0,(function*(){return this.bannersAdapters[g.$.PRELOADER].showPreloader(t)}))}showFullscreen(t){return R(this,void 0,void 0,(function*(){return this.bannersAdapters[g.$.FULLSCREEN].showFullscreen(t)}))}showRewardedVideo(t){return R(this,void 0,void 0,(function*(){return this.bannersAdapters[g.$.REWARDED].showRewardedVideo(t)}))}showSticky(t){return R(this,void 0,void 0,(function*(){return this.bannersAdapters[g.$.STICKY].showSticky(t)}))}refreshSticky(t){return R(this,void 0,void 0,(function*(){return this.bannersAdapters[g.$.STICKY].refreshSticky(t)}))}closeSticky(){return R(this,void 0,void 0,(function*(){return this.bannersAdapters[g.$.STICKY].closeSticky()}))}}var F=r(2712),$=r(5942),E=r(5572),U=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{c(n.next(t))}catch(t){s(t)}}function a(t){try{c(n.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};class _{constructor(t){this.sdk=t,this.hasIntegratedAuth=!0,this.isExternalLinksAllowed=!0,this.isSupportsCloudSaves=!0,this.isSecretCodeAuthAvailable=!1,this.isSupportsImageUploading=!1,this.hasAccountLinkingFeature=!1,this.isSupportsRemoteVariables=!1,this._hasAuthModal=!1,this.isLogoutAvailable=!1,this.type=$.z.TELEGRAM,this.socialNetworks=F.aD}getSDK(){return this.sdk}getNativeSDK(){return this.sdk.tgApi}requestPermissions(){return U(this,void 0,void 0,(function*(){return E.VK}))}uploadImage(){return null}getVariables(){return U(this,void 0,void 0,(function*(){return{}}))}}var I=r(3716),D=r.n(I),L=r(9503),N=function(t,e,r,n){return new(r||(r=Promise))((function(i,s){function o(t){try{c(n.next(t))}catch(t){s(t)}}function a(t){try{c(n.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))};const O={[L.Uo.RU]:t=>D()(t,"Звезда","Звезды","Звезд"),[L.Uo.EN]:t=>D()(t,"Star","Stars","Stars")};class B{constructor(t){this.sdk=t,this.isSupportsSubscriptions=!1,this.isOneTimeSubscription=!0,this.isSupportsPayments=!0,this.isServerValidation=!0,this.isNeedAuthorizeBeforePurchase=!1}mapProducts(t,e){return N(this,void 0,void 0,(function*(){return e.map((e=>Object.assign(Object.assign({},e),{currencySymbol:(O[t.language]||O[L.Uo.EN])(e.price),currency:"XTR"})))}))}consumeAllExpired(t,e,r){return N(this,void 0,void 0,(function*(){}))}fetchPurchases(){return N(this,void 0,void 0,(function*(){return{payload:{},purchases:[]}}))}purchase(t){return N(this,void 0,void 0,(function*(){if(yield this.sdk.ready,!(yield this.sdk.purchase(t)))throw new Error("payment_rejected");return{}}))}consume(t){return N(this,void 0,void 0,(function*(){return{}}))}subscribe(t,e){return N(this,void 0,void 0,(function*(){return yield this.sdk.ready,this.purchase(t)}))}unsubscribe(t,e){return N(this,void 0,void 0,(function*(){return{}}))}}function Z(t){return e=this,r=void 0,i=function*(){const[,e]=yield Promise.all([t.setupStorage([]),t.fetchConfig()]),r=new h(t.gp,e),n=new f.Z(t.gp,{}),i=new w(r),s=new T(e.platformConfig),o=new _(r),a=new B(r),c=new v.Z,u=new p.Z(n);return yield r.init(),{projectConfig:e,platformAdapter:o,playerAdapter:i,adsAdapter:s,appAdapter:c,socialsAdapter:u,paymentsAdapter:a}},new((n=void 0)||(n=Promise))((function(t,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n((function(t){t(r)}))).then(o,a)}c((i=i.apply(e,r||[])).next())}));var e,r,n,i}}}]);