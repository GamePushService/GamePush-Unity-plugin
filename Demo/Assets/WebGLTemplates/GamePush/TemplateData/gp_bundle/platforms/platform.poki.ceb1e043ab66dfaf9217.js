(self.webpackChunkgame_score_sdk=self.webpackChunkgame_score_sdk||[]).push([[6551],{4340:(t,e,r)=>{"use strict";r.d(e,{D:()=>i});const i=()=>Promise.resolve({success:!1,rating:0,error:""})},9:(t,e,r)=>{"use strict";r.d(e,{Z:()=>s});var i=r(4340),n=function(t,e,r,i){return new(r||(r=Promise))((function(n,s){function o(t){try{u(i.next(t))}catch(t){s(t)}}function a(t){try{u(i.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}u((i=i.apply(t,e||[])).next())}))};class s{constructor(){this.canAddShortcut=!1,this.canRequestReview=!1,this.isAlreadyReviewed=!1}addShortcut(){return n(this,void 0,void 0,(function*(){return!1}))}requestReview(){return(0,i.D)()}requestGameUrl(){return n(this,void 0,void 0,(function*(){}))}}},5572:(t,e,r)=>{"use strict";r.d(e,{VK:()=>i,yl:()=>n});const i={success:!0,payload:{}},n={success:!1,payload:{}}},2712:(t,e,r)=>{"use strict";r.d(e,{aD:()=>l,FU:()=>v,hc:()=>p});const i=(t,e)=>({type:t,getLink:e}),n=i("facebook",(t=>`//www.facebook.com/sharer/sharer.php?u=${t.url}`)),s=i("whatsapp",(t=>`//api.whatsapp.com/send?text=${t.text}%20${t.url}`)),o=i("telegram",(t=>`//t.me/share/url?url=${t.url}&text=${t.text}`)),a=i("vkontakte",(t=>`//vk.com/share.php?url=${t.url}&title=${t.text}&image=${t.image}`)),u=i("twitter",(t=>`//twitter.com/share?text=${t.text}&url=${t.url}`)),c=i("odnoklassniki",(t=>`//connect.ok.ru/offer?url=${t.url}&title=${t.text}&imageUrl=${t.image}`)),h=i("viber",(t=>`viber://forward?text=${t.text}%20${t.url}`)),d=i("moymir",(t=>`//connect.mail.ru/share?url=${t.url}&title=${t.text}&image_url=${t.image}`)),l=[s,o,a,c,h,d],v=[n,u,o,s,h],p=[n,u,o,s,h,a,c,d]},209:(t,e,r)=>{"use strict";r.d(e,{Z:()=>n});var i=r(6558);const n={stringify:t=>btoa(encodeURIComponent(JSON.stringify(t))),parse(t){if(!t)return{};const e=function(t){try{return JSON.parse(decodeURIComponent(atob(t)||"{}"))}catch(t){return""}}(t);return Object.keys(e).length>0?e:JSON.parse(function(t){try{return JSON.parse(atob(t)||"{}")}catch(t){return""}}(t)||"{}")},addShareParamsToUrl(t,e){try{const r=new URL(t);return Object.entries(e).forEach((([t,e])=>{r.searchParams.set(t,e)})),r.href}catch(e){i.kg.error("Invalid URL",t,e)}return t}}},449:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>b});var i=r(4917),n=r(6558),s=r(8293),o=r(9503),a=r(209),u=function(t,e,r,i){return new(r||(r=Promise))((function(n,s){function o(t){try{u(i.next(t))}catch(t){s(t)}}function a(t){try{u(i.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}u((i=i.apply(t,e||[])).next())}))};class c{constructor(t){this.gp=t,this.lang=o.Uo.EN,this.gameUrl="";const e=(new URL(location.href).searchParams.get("lang")||"").toLowerCase();this.lang=Object.values(o.Uo).includes(e)?e:null}get appUrl(){return this.gameUrl}init(){return u(this,void 0,void 0,(function*(){const t=(0,s._)();return this.ready=t.ready,(0,i.Z)({src:"https://game-cdn.poki.com/scripts/v2/poki-sdk.js",check:t=>"PokiSDK"in t}).then((()=>{var e;this.poki=window.PokiSDK,((null===(e=this.poki.SDK)||void 0===e?void 0:e.initializingPromise)||this.poki.init()).then((()=>t.done(this))).catch((()=>t.done(this))),this.ready.then((()=>this.createGameLink())),this.gp.on("gameplayStart",(()=>this.poki.gameplayStart())),this.gp.on("gameplayStop",(()=>this.poki.gameplayStop())),this.gp.on("gameStart",(()=>this.poki.gameLoadingFinished()))})).catch((e=>{n.kg.error(e),t.done(this)})),setTimeout((()=>t.done(this)),5e3),t.ready}))}getPlayer(){return u(this,void 0,void 0,(function*(){const t=(0,s._)();return t.done({id:0,name:"",photoSmall:"",photoMedium:"",photoLarge:""}),t.ready}))}showFullscreen(){var t;return u(this,void 0,void 0,(function*(){const e=(0,s._)();try{const r=yield this.poki.commercialBreak();e.done(!!(null===(t=null==r?void 0:r[0])||void 0===t?void 0:t.rewardAllowed))}catch(t){e.abort(t)}return e.ready}))}showRewardedVideo(){return u(this,void 0,void 0,(function*(){const t=(0,s._)();try{yield this.poki.rewardedBreak().then((e=>t.done(!!e)))}catch(e){t.abort(e)}return t.ready}))}showPreloader(){return this.showFullscreen()}createGameLink(){return u(this,void 0,void 0,(function*(){try{const t=this.poki.getURLParam("gd_gpParams");t&&(this.shareParams=a.Z.parse(t))}catch(t){n.kg.error(t)}try{this.gameUrl=yield this.poki.shareableURL()}catch(t){}}))}addShareParamsToUrl(t,e){return a.Z.addShareParamsToUrl(t,{gd_gpParams:a.Z.stringify(e)})}makeShareUrl(t){try{new URL(this.gp.app.url)}catch(t){return n.kg.error("unable to get link on POKI platform in test mode"),""}return this.addShareParamsToUrl(this.gp.app.url,t)}getShareParam(t){return this.shareParams?this.shareParams[t]:""}}var h=function(t,e,r,i){return new(r||(r=Promise))((function(n,s){function o(t){try{u(i.next(t))}catch(t){s(t)}}function a(t){try{u(i.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}u((i=i.apply(t,e||[])).next())}))};class d{constructor(t){this.sdk=t,this.isStickyAvailable=!1,this.stickyBannerConfig={isOverlapping:!1,height:0},this.isFullscreenAvailable=!0,this.isRewardedAvailable=!0,this.isPreloaderAvailable=!0,this.needToLeaveFullscreenBeforeAds=!1,this.canShowFullscreenBeforeGamePlay=!0}showPreloader(){return h(this,void 0,void 0,(function*(){return yield this.sdk.ready,this.sdk.showPreloader().catch((()=>!1))}))}showFullscreen(){return h(this,void 0,void 0,(function*(){return yield this.sdk.ready,this.sdk.showFullscreen().catch((()=>!1))}))}showRewardedVideo(){return h(this,void 0,void 0,(function*(){return yield this.sdk.ready,this.sdk.showRewardedVideo().catch((()=>!1))}))}showSticky(){return h(this,void 0,void 0,(function*(){return yield this.sdk.ready,!1}))}refreshSticky(){return h(this,void 0,void 0,(function*(){return yield this.sdk.ready,!1}))}closeSticky(){return h(this,void 0,void 0,(function*(){yield this.sdk.ready}))}}var l=function(t,e,r,i){return new(r||(r=Promise))((function(n,s){function o(t){try{u(i.next(t))}catch(t){s(t)}}function a(t){try{u(i.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}u((i=i.apply(t,e||[])).next())}))};class v{constructor(t){this.sdk=t,this.hasCredetials=!1,this.userId="",this.isAuthorizedAtPlatform=!0}getPlayerAuthInfo(){return l(this,void 0,void 0,(function*(){const t=(0,s._)();return t.done({}),t.ready}))}getPlayerContext(){return l(this,void 0,void 0,(function*(){return{platformData:yield this.getPlayerAuthInfo(),key:""}}))}loginPlayer(){return l(this,void 0,void 0,(function*(){return this.sdk.getPlayer()}))}logoutPlayer(){return l(this,void 0,void 0,(function*(){return!1}))}getPlayer(){return l(this,void 0,void 0,(function*(){return this.sdk.getPlayer()}))}isPlatformAvatar(){return!1}publishRecord(t){}setCredentials(t){}}var p=r(9),f=r(2712),m=r(5942),y=r(5572),g=function(t,e,r,i){return new(r||(r=Promise))((function(n,s){function o(t){try{u(i.next(t))}catch(t){s(t)}}function a(t){try{u(i.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}u((i=i.apply(t,e||[])).next())}))};class k{constructor(t){this.sdk=t,this.hasIntegratedAuth=!1,this.isExternalLinksAllowed=!1,this.isSecretCodeAuthAvailable=!0,this.isSupportsImageUploading=!1,this._hasAuthModal=!1,this.isLogoutAvailable=!1,this.type=m.z.POKI,this.socialNetworks=f.FU,this.hasAccountLinkingFeature=!1,this.isSupportsRemoteVariables=!1,this.isSupportsCloudSaves=!1}getSDK(){return this.sdk}getNativeSDK(){return this.sdk.poki}requestPermissions(){return g(this,void 0,void 0,(function*(){return y.VK}))}uploadImage(){return null}getVariables(){return g(this,void 0,void 0,(function*(){return{}}))}}class w{constructor(t,e){this.sdk=t,this.gameLink=e,this.isSupportsShare=!0,this.isSupportsNativeShare=!1,this.isSupportsNativePosts=!1,this.isSupportsNativeInvite=!1,this.isSupportsNativeCommunityJoin=!1,this.canJoinCommunity=!1,this.isSupportShareParams=!0}get shareParams(){return this.sdk.shareParams}share(){return t=this,e=void 0,i=function*(){return Promise.resolve(!1)},new((r=void 0)||(r=Promise))((function(n,s){function o(t){try{u(i.next(t))}catch(t){s(t)}}function a(t){try{u(i.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}u((i=i.apply(t,e||[])).next())}));var t,e,r,i}post(t){return Promise.resolve(!1)}invite(t){return Promise.resolve(!1)}getCommunityLink(t){return t}joinCommunity(){return Promise.resolve(!1)}addShareParamsToUrl(t,e){return this.sdk.addShareParamsToUrl(t,e)}makeShareUrl(t){return this.sdk.makeShareUrl(t)}getShareParam(t){return this.sdk.getShareParam(t)}}var P=function(t,e,r,i){return new(r||(r=Promise))((function(n,s){function o(t){try{u(i.next(t))}catch(t){s(t)}}function a(t){try{u(i.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,a)}u((i=i.apply(t,e||[])).next())}))};class S{constructor(t){this.sdk=t,this.isSupportsSubscriptions=!1,this.isOneTimeSubscription=!0,this.isSupportsPayments=!1,this.isServerValidation=!1,this.isNeedAuthorizeBeforePurchase=!1}mapProducts(t,e){return P(this,void 0,void 0,(function*(){return e}))}consumeAllExpired(t,e,r){return P(this,void 0,void 0,(function*(){}))}fetchPurchases(){return P(this,void 0,void 0,(function*(){return{payload:{},purchases:[]}}))}purchase(t){return P(this,void 0,void 0,(function*(){return{}}))}consume(t){return P(this,void 0,void 0,(function*(){return{}}))}subscribe(t,e){return P(this,void 0,void 0,(function*(){return{}}))}unsubscribe(t,e){return P(this,void 0,void 0,(function*(){return{}}))}}function b(t){return e=this,r=void 0,n=function*(){const e=new c(t.gp),[,,r]=yield Promise.all([e.init(),t.setupStorage([]),t.fetchConfig(e.lang)]),i=new d(e),n=new v(e);return{adsAdapter:i,appAdapter:new p.Z,playerAdapter:n,platformAdapter:new k(e),socialsAdapter:new w(e,r.platformConfig.gameLink),paymentsAdapter:new S(e),projectConfig:r}},new((i=void 0)||(i=Promise))((function(t,s){function o(t){try{u(n.next(t))}catch(t){s(t)}}function a(t){try{u(n.throw(t))}catch(t){s(t)}}function u(e){var r;e.done?t(e.value):(r=e.value,r instanceof i?r:new i((function(t){t(r)}))).then(o,a)}u((n=n.apply(e,r||[])).next())}));var e,r,i,n}}}]);