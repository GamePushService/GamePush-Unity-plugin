(self.webpackChunkgame_score_sdk=self.webpackChunkgame_score_sdk||[]).push([[4773],{4340:(t,e,r)=>{"use strict";r.d(e,{D:()=>n});const n=()=>Promise.resolve({success:!1,rating:0,error:""})},5572:(t,e,r)=>{"use strict";r.d(e,{VK:()=>n,yl:()=>i});const n={success:!0,payload:{}},i={success:!1,payload:{}}},2712:(t,e,r)=>{"use strict";r.d(e,{aD:()=>l,FU:()=>v,hc:()=>p});const n=(t,e)=>({type:t,getLink:e}),i=n("facebook",(t=>`//www.facebook.com/sharer/sharer.php?u=${t.url}`)),o=n("whatsapp",(t=>`//api.whatsapp.com/send?text=${t.text}%20${t.url}`)),s=n("telegram",(t=>`//t.me/share/url?url=${t.url}&text=${t.text}`)),a=n("vkontakte",(t=>`//vk.com/share.php?url=${t.url}&title=${t.text}&image=${t.image}`)),u=n("twitter",(t=>`//twitter.com/share?text=${t.text}&url=${t.url}`)),d=n("odnoklassniki",(t=>`//connect.ok.ru/offer?url=${t.url}&title=${t.text}&imageUrl=${t.image}`)),c=n("viber",(t=>`viber://forward?text=${t.text}%20${t.url}`)),h=n("moymir",(t=>`//connect.mail.ru/share?url=${t.url}&title=${t.text}&image_url=${t.image}`)),l=[o,s,a,d,c,h],v=[i,u,s,o,c],p=[i,u,s,o,c,a,d,h]},6390:(t,e,r)=>{"use strict";function n(){try{return window.top.location.href||location.href}catch(t){return location.href}}r.d(e,{T:()=>n})},209:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var n=r(6558);const i={stringify:t=>btoa(encodeURIComponent(JSON.stringify(t))),parse(t){if(!t)return{};const e=function(t){try{return JSON.parse(decodeURIComponent(atob(t)||"{}"))}catch(t){return""}}(t);return Object.keys(e).length>0?e:JSON.parse(function(t){try{return JSON.parse(atob(t)||"{}")}catch(t){return""}}(t)||"{}")},addShareParamsToUrl(t,e){try{const r=new URL(t);return Object.entries(e).forEach((([t,e])=>{r.searchParams.set(t,e)})),r.href}catch(e){n.kg.error("Invalid URL",t,e)}return t}}},9786:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>P});var n=r(180),i=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))};class o{constructor(t,e,r){this.gp=t,this.sdk=e,this.config=r,this.stickyBannerConfig={isOverlapping:!1,height:0},this.needToLeaveFullscreenBeforeAds=!1,this.canShowFullscreenBeforeGamePlay=!1,this.banners=r.customAdsConfig.configs.android.banners,this.bannerErrors=this.banners.map((t=>({type:t.type,error:t.adServer&&t.adServer!==n.Fl.YandexSimpleMonetization?`Ad Server [${t.adServer}] is not supported for ${t.type}`:null})))}get isStickyAvailable(){const t=this.getBanner(n.$.STICKY);return!!t&&t.enabled}get isFullscreenAvailable(){const t=this.getBanner(n.$.FULLSCREEN);return!!t&&t.enabled}get isRewardedAvailable(){const t=this.getBanner(n.$.REWARDED);return!!t&&t.enabled}get isPreloaderAvailable(){const t=this.getBanner(n.$.PRELOADER);return!!t&&t.enabled}getBanner(t){return this.sdk.adSdk&&this.banners.find((e=>e.type===t))||null}getErrorForBanner(t){const e=this.bannerErrors.find((e=>e.type===t));return e?e.error:null}getBannerPosition(t){return this.config.banners.find((e=>e.type===t)).position||"bottom"}showPreloader(){return i(this,void 0,void 0,(function*(){yield this.sdk.ready;const{bannerId:t}=this.getBanner(n.$.PRELOADER);return!this.getErrorForBanner(n.$.PRELOADER)&&(this.gp.isPortrait?this.sdk.showPreloader(t).catch((()=>!1)):this.sdk.showFullscreen(t))}))}showFullscreen(){return i(this,void 0,void 0,(function*(){yield this.sdk.ready;const{bannerId:t}=this.getBanner(n.$.FULLSCREEN);return!this.getErrorForBanner(n.$.FULLSCREEN)&&this.sdk.showFullscreen(t).catch((()=>!1))}))}showRewardedVideo(){return i(this,void 0,void 0,(function*(){yield this.sdk.ready;const{bannerId:t}=this.getBanner(n.$.REWARDED);return!this.getErrorForBanner(n.$.REWARDED)&&this.sdk.showRewardedVideo(t).catch((()=>!1))}))}showSticky(){return i(this,void 0,void 0,(function*(){yield this.sdk.ready;const{bannerId:t}=this.getBanner(n.$.STICKY),e=this.getBannerPosition(n.$.STICKY);return!this.getErrorForBanner(n.$.STICKY)&&this.sdk.showSticky(t,"RESIZE",n.tM[e]).catch((()=>!1))}))}refreshSticky(){return i(this,void 0,void 0,(function*(){const{bannerId:t}=this.getBanner(n.$.STICKY);return yield this.sdk.closeSticky(t),this.showSticky()}))}closeSticky(){return i(this,void 0,void 0,(function*(){yield this.sdk.ready;const{bannerId:t}=this.getBanner(n.$.STICKY);yield this.sdk.closeSticky(t).catch((()=>!1))}))}}var s=r(4340),a=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))};class u{constructor(){this.canAddShortcut=!1,this.canRequestReview=!1,this.isAlreadyReviewed=!1}addShortcut(){return a(this,void 0,void 0,(function*(){return!1}))}requestReview(){return(0,s.D)()}requestGameUrl(){return a(this,void 0,void 0,(function*(){}))}}var d=r(2712),c=r(5572),h=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))};class l{constructor(t,e,r){this.sdk=t,this.config=e,this.isExternalLinksAllowed=!0,this.isSecretCodeAuthAvailable=!0,this.socialNetworks=d.FU,this.isSupportsImageUploading=!1,this.hasAccountLinkingFeature=!1,this.isSupportsRemoteVariables=!1,this.isSupportsCloudSaves=!1,this.type=r}get hasIntegratedAuth(){var t;return!!(null===(t=this.config.authConfig.configs.android)||void 0===t?void 0:t.activeService)}get _hasAuthModal(){var t;return!!(null===(t=this.config.authConfig.configs.android)||void 0===t?void 0:t.activeService)}get isLogoutAvailable(){var t;return!!(null===(t=this.config.authConfig.configs.android)||void 0===t?void 0:t.activeService)}getSDK(){return this.sdk}getNativeSDK(){return this.getSDK()}requestPermissions(){return h(this,void 0,void 0,(function*(){return c.VK}))}uploadImage(){return null}getVariables(){return h(this,void 0,void 0,(function*(){return{}}))}}class v{constructor(t){this.sdk=t,this.isSupportsShare=!1,this.isSupportsNativeShare=!1,this.isSupportsNativePosts=!1,this.isSupportsNativeInvite=!1,this.isSupportsNativeCommunityJoin=!1,this.canJoinCommunity=!1,this.isSupportShareParams=!1}get shareParams(){return{}}share(t){return Promise.resolve(!1)}post(t){return Promise.resolve(!1)}invite(t){return Promise.resolve(!1)}getCommunityLink(t){return t}joinCommunity(){return Promise.resolve(!1)}addShareParamsToUrl(t,e){return t}makeShareUrl(t){return""}getShareParam(t){return""}}var p=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))};class f{constructor(t,e){this.gp=t,this.sdk=e,this.isServerValidation=!0,this.isOneTimeSubscription=!1,this.isNeedAuthorizeBeforePurchase=!1}get isSupportsPayments(){var t;return!!(null===(t=this.gp.platform.config.paymentsConfig.configs.android)||void 0===t?void 0:t.activeService)}get isSupportsSubscriptions(){var t;return!!(null===(t=this.gp.platform.config.paymentsConfig.configs.android)||void 0===t?void 0:t.activeService)}mapProducts(t,e){return p(this,void 0,void 0,(function*(){return e}))}consumeAllExpired(t,e,r){return p(this,void 0,void 0,(function*(){}))}fetchPurchases(){return p(this,void 0,void 0,(function*(){return{payload:{},purchases:[]}}))}purchase(t){return p(this,void 0,void 0,(function*(){return yield this.sdk.ready,this.sdk.purchase(t)}))}consume(t){return p(this,void 0,void 0,(function*(){return{}}))}subscribe(t,e){return p(this,void 0,void 0,(function*(){return yield this.sdk.ready,this.sdk.subscribe(t,e)}))}unsubscribe(t,e){return p(this,void 0,void 0,(function*(){return yield this.sdk.ready,this.sdk.unsubscribe(e)}))}}var y=r(8293),g=r(6558),m=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))};class k{constructor(t,e){this.gp=t,this.sdk=e}init(){return m(this,void 0,void 0,(function*(){const t=(0,y._)();this.ready=t.ready;try{this.adSdk=window.yaAdMob}catch(t){g.kg.error(t)}return t.done(this),t.ready}))}getPlayer(){return m(this,void 0,void 0,(function*(){const t=(0,y._)();return t.done({id:0,name:"",photoSmall:"",photoMedium:"",photoLarge:""}),t.ready}))}loginPlayer(){return m(this,void 0,void 0,(function*(){return this.getPlayer()}))}showPreloader(t){var e,r;return m(this,void 0,void 0,(function*(){const n=(0,y._)();try{yield null===(e=this.adSdk)||void 0===e?void 0:e.loadAppOpenAd(t),yield null===(r=this.adSdk)||void 0===r?void 0:r.showAppOpenAd(),n.done(!0)}catch(t){g.kg.error(t),n.done(!1)}return n.ready}))}showFullscreen(t){var e,r;return m(this,void 0,void 0,(function*(){const n=(0,y._)();try{yield null===(e=this.adSdk)||void 0===e?void 0:e.interstitial(t),yield null===(r=this.adSdk)||void 0===r?void 0:r.showInterstitial(),n.done(!0)}catch(t){g.kg.error(t),n.done(!1)}return n.ready}))}showRewardedVideo(t){var e,r;return m(this,void 0,void 0,(function*(){const n=(0,y._)();try{yield null===(e=this.adSdk)||void 0===e?void 0:e.rewarded(t);const{rewarded:i}=yield null===(r=this.adSdk)||void 0===r?void 0:r.showRewarded();n.done(i)}catch(t){g.kg.error(t),n.done(!1)}return n.ready}))}showSticky(t,e,r){var n;return m(this,void 0,void 0,(function*(){const i=(0,y._)();try{yield null===(n=this.adSdk)||void 0===n?void 0:n.banner(t,e,r),i.done(!0)}catch(t){g.kg.error(t),i.done(!1)}return i.ready}))}closeSticky(t){var e;return m(this,void 0,void 0,(function*(){const r=(0,y._)();try{yield null===(e=this.adSdk)||void 0===e?void 0:e.removeBanner(t),r.done(!0)}catch(t){g.kg.error(t),r.done(!1)}return r.ready}))}purchase(t){return m(this,void 0,void 0,(function*(){return this.sdk.makePurchase(t)}))}subscribe(t,e){return m(this,void 0,void 0,(function*(){if(!this.gp.player.isLoggedIn)throw new Error("subscribe failed");return 0==(null==e?void 0:e.subscribed)&&Date.parse(null==e?void 0:e.expiredAt)>Date.parse(this.gp.serverTime)?this.sdk.resumeSubscription(e):this.sdk.makePurchase(t)}))}unsubscribe(t){return m(this,void 0,void 0,(function*(){const e=(0,y._)(),r=yield this.sdk.unsubscribe(t);return r.purchase.subscribed?e.abort("unsubscribe failed"):e.done({subscription_id:r.purchase._id}),e.ready}))}}var S=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))};class w{constructor(t){this.gp=t}makePurchase(t){return S(this,void 0,void 0,(function*(){const e=(0,y._)();try{yield this.gp.loadOverlay(),yield this.gp.overlay.openProductPurchase(t),e.done({product:t})}catch(t){e.abort(t)}return e.ready}))}unsubscribe(t){return S(this,void 0,void 0,(function*(){return yield this.gp._services.paymentsService.cancelSubscription({id:t.productId,payload:t.payload})}))}resumeSubscription(t){return S(this,void 0,void 0,(function*(){return yield this.gp._services.paymentsService.resumeSubscription({id:t.productId,payload:t.payload})}))}}var b=r(227);function P(t,e){return r=this,n=void 0,s=function*(){const[,r]=yield Promise.all([t.setupStorage([]),t.fetchConfig()]),n=new k(t.gp,new w(t.gp));yield n.init();const i=new b.Z(t.gp,t.apiClient,n),s=new o(t.gp,n,r.platformConfig);return{appAdapter:new u,adsAdapter:s,playerAdapter:i,platformAdapter:new l(n,r.platformConfig,e),socialsAdapter:new v(n),paymentsAdapter:new f(t.gp,n),projectConfig:r}},new((i=void 0)||(i=Promise))((function(t,e){function o(t){try{u(s.next(t))}catch(t){e(t)}}function a(t){try{u(s.throw(t))}catch(t){e(t)}}function u(e){var r;e.done?t(e.value):(r=e.value,r instanceof i?r:new i((function(t){t(r)}))).then(o,a)}u((s=s.apply(r,n||[])).next())}));var r,n,i,s}}}]);