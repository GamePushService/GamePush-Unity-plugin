(self.webpackChunkgame_score_sdk=self.webpackChunkgame_score_sdk||[]).push([[5433],{1017:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});var r=i(2616),n=i.n(r)()((function(t){return t[1]}));n.push([t.id,".gp-crazy-games-sticky{display:flex;justify-content:center;position:fixed;left:50%;transform:translateX(-50%);z-index:1000;overflow:hidden}.gp-crazy-games-sticky__creative{position:relative;width:100%;height:100%}.gp-crazy-games-sticky_top{top:0}.gp-crazy-games-sticky_bottom{bottom:0}",""]);const s=n},4340:(t,e,i)=>{"use strict";i.d(e,{D:()=>r});const r=()=>Promise.resolve({success:!1,rating:0,error:""})},5572:(t,e,i)=>{"use strict";i.d(e,{VK:()=>r,yl:()=>n});const r={success:!0,payload:{}},n={success:!1,payload:{}}},9789:(t,e,i)=>{"use strict";i.d(e,{px:()=>n,bH:()=>o,sO:()=>a,pm:()=>d,Go:()=>c,Bi:()=>u});var r=i(1642);function n(t){return`${t}px`}const s={PX:"px",PERCENT:"%"};function o(t){return s[t]}function a(t){d(t.sticky)}function d(t){t&&(t.$el.style.width=`${function(t){let e=window.innerWidth;if("PX"===t.options.maxWidthDimension&&t.options.maxWidth>0&&window.innerWidth>t.options.maxWidth)e=t.options.maxWidth;else if("PERCENT"===t.options.maxWidthDimension&&t.options.maxWidth>0){const i=t.options.maxWidth/100*window.innerWidth;window.innerWidth>t.options.maxWidth&&(e=i)}const i=t.options.fitCanvas&&h()||e;return Math.round(i)}(t)}px`)}function c(t,e){const i=e?{value:t.options.maxWidth,dimension:t.options.maxWidthDimension}:t.options.desktopMaxWidth&&t.options.desktopMaxWidthDimension?{value:t.options.desktopMaxWidth,dimension:t.options.desktopMaxWidthDimension}:{value:t.options.maxWidth,dimension:t.options.maxWidthDimension},r="PERCENT"===i.dimension?.01*i.value*window.innerWidth:i.value;return Math.min(Math.round(t.options.fitCanvas&&h()||r),window.innerWidth)||window.innerWidth}function u(t,e,i){const r=e?{value:t.options.maxHeight,dimension:t.options.maxHeightDimension}:t.options.desktopMaxHeight&&t.options.desktopMaxHeightDimension?{value:t.options.desktopMaxHeight,dimension:t.options.desktopMaxHeightDimension}:{value:t.options.maxHeight,dimension:t.options.maxHeightDimension},n="PERCENT"===r.dimension?.01*r.value*window.innerHeight:r.value;return Math.min(Math.round(n),window.innerHeight)||i}function h(){var t;return window.innerWidth>=640&&(null===(t=(0,r.Z)())||void 0===t?void 0:t.offsetWidth)||0}},2712:(t,e,i)=>{"use strict";i.d(e,{aD:()=>l,FU:()=>p,hc:()=>v});const r=(t,e)=>({type:t,getLink:e}),n=r("facebook",(t=>`//www.facebook.com/sharer/sharer.php?u=${t.url}`)),s=r("whatsapp",(t=>`//api.whatsapp.com/send?text=${t.text}%20${t.url}`)),o=r("telegram",(t=>`//t.me/share/url?url=${t.url}&text=${t.text}`)),a=r("vkontakte",(t=>`//vk.com/share.php?url=${t.url}&title=${t.text}&image=${t.image}`)),d=r("twitter",(t=>`//twitter.com/share?text=${t.text}&url=${t.url}`)),c=r("odnoklassniki",(t=>`//connect.ok.ru/offer?url=${t.url}&title=${t.text}&imageUrl=${t.image}`)),u=r("viber",(t=>`viber://forward?text=${t.text}%20${t.url}`)),h=r("moymir",(t=>`//connect.mail.ru/share?url=${t.url}&title=${t.text}&image_url=${t.image}`)),l=[s,o,a,c,u,h],p=[n,d,o,s,u],v=[n,d,o,s,u,a,c,h]},1642:(t,e,i)=>{"use strict";function r(){return document.querySelector("canvas")}i.d(e,{Z:()=>r})},209:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});var r=i(6558);const n={stringify:t=>btoa(encodeURIComponent(JSON.stringify(t))),parse(t){if(!t)return{};const e=function(t){try{return JSON.parse(decodeURIComponent(atob(t)||"{}"))}catch(t){return""}}(t);return Object.keys(e).length>0?e:JSON.parse(function(t){try{return JSON.parse(atob(t)||"{}")}catch(t){return""}}(t)||"{}")},addShareParamsToUrl(t,e){try{const i=new URL(t);return Object.entries(e).forEach((([t,e])=>{i.searchParams.set(t,e)})),i.href}catch(e){r.kg.error("Invalid URL",t,e)}return t}}},5186:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>N});var r=i(8293),n=function(t,e,i,r){return new(i||(i=Promise))((function(n,s){function o(t){try{d(r.next(t))}catch(t){s(t)}}function a(t){try{d(r.throw(t))}catch(t){s(t)}}function d(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}d((r=r.apply(t,e||[])).next())}))};class s{constructor(t){this.sdk=t,this.isStickyAvailable=!0,this.stickyBannerConfig={isOverlapping:!1,height:0},this.isFullscreenAvailable=!0,this.isRewardedAvailable=!0,this.isPreloaderAvailable=!0,this.canShowFullscreenBeforeGamePlay=!0,this.needToLeaveFullscreenBeforeAds=!1}showPreloader(){return n(this,void 0,void 0,(function*(){return yield this.sdk.ready,this.sdk.showPreloader().catch((()=>!1))}))}showFullscreen(){return n(this,void 0,void 0,(function*(){return yield this.sdk.ready,this.sdk.showFullscreen().catch((()=>!1))}))}showRewardedVideo(){return n(this,void 0,void 0,(function*(){return yield this.sdk.ready,this.sdk.showRewardedVideo().catch((()=>!1))}))}showSticky(t){return n(this,void 0,void 0,(function*(){const e=(0,r._)();return this.sdk.app.banners.sticky?(e.done(!0),e.ready):(this.sdk.app.createSticky(t),yield this.sdk.crazysdk.banner.requestResponsiveBanner("responsive-banner-container"),e.done(!0),e.ready)}))}refreshSticky(t){return n(this,void 0,void 0,(function*(){if(!this.sdk.app.banners.sticky)return this.showSticky(t);const e=(0,r._)();return yield this.sdk.crazysdk.banner.requestResponsiveBanner("responsive-banner-container"),e.done(!0),e.ready}))}closeSticky(){return n(this,void 0,void 0,(function*(){yield this.sdk.ready,this.sdk.app.closeSticky()}))}}var o=function(t,e,i,r){return new(i||(i=Promise))((function(n,s){function o(t){try{d(r.next(t))}catch(t){s(t)}}function a(t){try{d(r.throw(t))}catch(t){s(t)}}function d(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}d((r=r.apply(t,e||[])).next())}))};class a{constructor(t,e){this.sdk=t,this.gp=e,this.hasCredetials=!1,this.userId=""}get isAuthorizedAtPlatform(){return this.sdk._isAuthorized}getPlayerAuthInfo(){return o(this,void 0,void 0,(function*(){if(!this.gp.platform.saveFormat.isCloudSave)return{id:this.userId,token:null};const t=yield this.sdk.getToken();if("string"!=typeof t||3!==t.split(".").length)throw"cg returned bad token";const e=JSON.parse(atob(t.split(".")[1]));return this.userId=e.userId,this.hasCredetials=Boolean(this.userId),{id:this.userId,token:t}}))}getPlayerContext(){return o(this,void 0,void 0,(function*(){const{id:t,token:e}=yield this.getPlayerAuthInfo();return{platformData:{token:e},key:t}}))}loginPlayer(){return o(this,void 0,void 0,(function*(){return this.sdk.loginPlayer()}))}logoutPlayer(){return o(this,void 0,void 0,(function*(){return!1}))}getPlayer(){return o(this,void 0,void 0,(function*(){return this.sdk.getPlayer()}))}publishRecord(t){}isPlatformAvatar(t){return t.includes("https://images.crazygames.com")}setCredentials(t){}}var d=i(2712),c=i(5942),u=i(5572),h=function(t,e,i,r){return new(i||(i=Promise))((function(n,s){function o(t){try{d(r.next(t))}catch(t){s(t)}}function a(t){try{d(r.throw(t))}catch(t){s(t)}}function d(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}d((r=r.apply(t,e||[])).next())}))};class l{constructor(t){this.sdk=t,this.hasIntegratedAuth=!1,this.isExternalLinksAllowed=!0,this.isSecretCodeAuthAvailable=!1,this._hasAuthModal=!0,this.isLogoutAvailable=!1,this.type=c.z.CRAZY_GAMES,this.socialNetworks=d.FU,this.isSupportsImageUploading=!1,this.hasAccountLinkingFeature=!0,this.isSupportsRemoteVariables=!1,this.isSupportsCloudSaves=!0,this.hasIntegratedAuth=this.sdk.isUserAccountAvailable}getSDK(){return this.sdk}getNativeSDK(){return this.sdk.crazysdk}requestPermissions(){return h(this,void 0,void 0,(function*(){return u.VK}))}uploadImage(){return null}getVariables(){return h(this,void 0,void 0,(function*(){return{}}))}}class p{constructor(t){this.sdk=t,this.isSupportsShare=!0,this.isSupportsNativeShare=!1,this.isSupportsNativePosts=!1,this.isSupportsNativeInvite=!1,this.isSupportsNativeCommunityJoin=!1,this.canJoinCommunity=!0,this.isSupportShareParams=!0}get shareParams(){return this.sdk.shareParams}share(t){return Promise.resolve(!1)}post(t){return Promise.resolve(!1)}invite(t){return Promise.resolve(!1)}getCommunityLink(t){return t}joinCommunity(){return Promise.resolve(!1)}addShareParamsToUrl(t,e){return this.sdk.addShareParamsToUrl(t,e)}makeShareUrl(t){return this.sdk.makeShareUrl(t)}getShareParam(t){return this.sdk.getShareParam(t)}}var v=i(4917),m=i(6558),y=i(4943),f=i.n(y),g=i(9789),w=i(3379),k=i.n(w),S=i(1017);k()(S.Z,{insert:"head",singleton:!1}),S.Z.locals;var P=i(209),x=function(t,e,i,r){return new(i||(i=Promise))((function(n,s){function o(t){try{d(r.next(t))}catch(t){s(t)}}function a(t){try{d(r.throw(t))}catch(t){s(t)}}function d(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}d((r=r.apply(t,e||[])).next())}))};class A{constructor(t,e){this.gp=t,this.config=e,this.app=function(){const t=document.createElement("div");t.id="gs-crazy-games",document.body.appendChild(t);const e={sticky:null};return window.addEventListener("resize",(()=>(0,g.sO)(e))),{banners:e,createSticky(i){e.sticky||(e.sticky=function(e){const i=f()({tablet:!0,featureDetect:!0}),r=document.createElement("div");r.className=`gp-crazy-games-sticky gp-crazy-games-sticky_${e.position||"bottom"}`;const n=document.createElement("div");n.id="responsive-banner-container",n.className="gp-crazy-games-sticky__creative";const s={$wrapper:r,$el:n,options:e},o=(0,g.Go)(s,i);r.style.maxWidth=(0,g.px)(o),n.style.maxWidth=(0,g.px)(o),n.style.width=(0,g.px)(o);const a=(0,g.Bi)(s,i,90);return r.style.maxHeight=(0,g.px)(a),n.style.maxHeight=(0,g.px)(a),n.style.height=(0,g.px)(a),r.appendChild(n),t.appendChild(r),s}(i))},closeSticky(){e.sticky&&(e.sticky.$wrapper.remove(),e.sticky.$wrapper.innerHTML="",e.sticky=null)}}}(),this.gameUrl="",this.isUserAccountAvailable=!1,this._isAuthorized=!1,this.readyAd=(0,r._)();try{const t=new URL(window.location.href).searchParams.get("_gpParams");t&&(this.shareParams=P.Z.parse(t))}catch(t){m.kg.error(t)}}requestGameUrl(){return x(this,void 0,void 0,(function*(){try{this.gameUrl=yield this.crazysdk.game.inviteLink({})}catch(t){m.kg.error(t)}}))}get appUrl(){return this.gameUrl||this.requestGameUrl(),this.gameUrl}init(){return x(this,void 0,void 0,(function*(){const t=(0,r._)();return this.ready=t.ready,yield(0,v.Z)({src:"https://sdk.crazygames.com/crazygames-sdk-v3.js",check:t=>"CrazyGames"in t}).then((()=>x(this,void 0,void 0,(function*(){const e=(0,r._)({timeout:1e4});this.crazysdk=window.CrazyGames.SDK,this.crazysdk.init().then((()=>e.done(!0))).catch((()=>e.done(!1))),(yield e.ready)||t.abort("CrazyGames SDK initialization failed"),this.isUserAccountAvailable=this.crazysdk.user.isUserAccountAvailable,this.gp.on("gameplayStart",(()=>this.crazysdk.game.gameplayStart())),this.gp.on("gameplayStop",(()=>this.crazysdk.game.gameplayStop())),this.isUserAccountAvailable&&(this.crazysdk.user.getUser().then((t=>{t&&(this._isAuthorized=!0)})),this.crazysdk.user.addAuthListener((()=>x(this,void 0,void 0,(function*(){const{player:t}=this.gp;t&&this.gp.platform.saveFormat.isCloudSave&&(yield t.sync({silent:!1}),t._events.emit("login",!0))}))))),this.gp.ready.then((()=>{this.gp.achievements.on("unlock",(()=>this.crazysdk.game.happytime()))}))})))).catch(m.kg.error),t.done(this),t.ready}))}getPlayer(){return x(this,void 0,void 0,(function*(){yield this.ready;try{let t=null;return this.isUserAccountAvailable&&(t=yield this.crazysdk.user.getUser()),{id:(null==t?void 0:t.id)||0,name:(null==t?void 0:t.username)||"",photoLarge:(null==t?void 0:t.profilePictureUrl)||"",photoMedium:(null==t?void 0:t.profilePictureUrl)||"",photoSmall:(null==t?void 0:t.profilePictureUrl)||""}}catch(t){return{id:0,name:"",photoLarge:"",photoMedium:"",photoSmall:""}}}))}loginPlayer(){return x(this,void 0,void 0,(function*(){yield this.ready;let t=null;try{if(this.isUserAccountAvailable&&(t=yield this.crazysdk.user.getUser()),!t)throw"not_logged_in"}catch(e){try{this.isUserAccountAvailable&&(t=yield this.crazysdk.user.showAuthPrompt())}catch(e){if("userAlreadySignedIn"===(null==e?void 0:e.code)||"showAuthPromptInProgress"===(null==e?void 0:e.code))try{this.isUserAccountAvailable&&(t=yield this.crazysdk.user.getUser())}catch(t){m.kg.error("failed to get user",t)}else m.kg.error("failed to show auth prompt",(null==e?void 0:e.message)||e)}}return this._isAuthorized=!!(null==t?void 0:t.id),{id:(null==t?void 0:t.id)||0,name:(null==t?void 0:t.username)||"",photoLarge:(null==t?void 0:t.profilePictureUrl)||"",photoMedium:(null==t?void 0:t.profilePictureUrl)||"",photoSmall:(null==t?void 0:t.profilePictureUrl)||""}}))}getToken(){return x(this,void 0,void 0,(function*(){yield this.ready;let t="";return this.isUserAccountAvailable&&(t=yield this.crazysdk.user.getUserToken()),t}))}showBanner(t){this.readyAd.done(!1),this.readyAd=(0,r._)();try{this.crazysdk.ad.requestAd(t,{adFinished:()=>this.readyAd.done(!0),adError:()=>this.readyAd.done(!1)})}catch(t){this.readyAd.abort(t)}return this.readyAd.ready}showFullscreen(){return this.showBanner("midgame")}showRewardedVideo(){return this.showBanner("rewarded")}showPreloader(){return this.showFullscreen()}addShareParamsToUrl(t,e){return P.Z.addShareParamsToUrl(t,{_gpParams:P.Z.stringify(e)})}makeShareUrl(t){return this.addShareParamsToUrl(this.gp.app.url,t)}getShareParam(t){return this.shareParams?this.shareParams[t]:""}getStorage(){return x(this,void 0,void 0,(function*(){return yield this.ready,this.crazysdk.data}))}}var b=function(t,e,i,r){return new(i||(i=Promise))((function(n,s){function o(t){try{d(r.next(t))}catch(t){s(t)}}function a(t){try{d(r.throw(t))}catch(t){s(t)}}function d(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}d((r=r.apply(t,e||[])).next())}))};class U{constructor(t){this.sdk=t,this.isSupportsSubscriptions=!1,this.isOneTimeSubscription=!0,this.isSupportsPayments=!1,this.isServerValidation=!1,this.isNeedAuthorizeBeforePurchase=!1}mapProducts(t,e){return b(this,void 0,void 0,(function*(){return e}))}consumeAllExpired(t,e,i){return b(this,void 0,void 0,(function*(){}))}fetchPurchases(){return b(this,void 0,void 0,(function*(){return{payload:{},purchases:[]}}))}purchase(t){return b(this,void 0,void 0,(function*(){return{}}))}consume(t){return b(this,void 0,void 0,(function*(){return{}}))}subscribe(t,e){return b(this,void 0,void 0,(function*(){return{}}))}unsubscribe(t,e){return b(this,void 0,void 0,(function*(){return{}}))}}var z=i(4340);class C{constructor(t){this.sdk=t,this.canAddShortcut=!1,this.canRequestReview=!1,this.isAlreadyReviewed=!1}addShortcut(){return t=this,e=void 0,r=function*(){return!1},new((i=void 0)||(i=Promise))((function(n,s){function o(t){try{d(r.next(t))}catch(t){s(t)}}function a(t){try{d(r.throw(t))}catch(t){s(t)}}function d(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}d((r=r.apply(t,e||[])).next())}));var t,e,i,r}requestReview(){return(0,z.D)()}requestGameUrl(){return this.sdk.requestGameUrl()}}var _,W=function(t,e,i,r){return new(i||(i=Promise))((function(n,s){function o(t){try{d(r.next(t))}catch(t){s(t)}}function a(t){try{d(r.throw(t))}catch(t){s(t)}}function d(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}d((r=r.apply(t,e||[])).next())}))},$=function(t,e,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(t):r?r.value:e.get(t)};class I{constructor(t){this.sdk=t,_.set(this,void 0),this.isLocal=!1}ready(){return W(this,void 0,void 0,(function*(){$(this,_,"f")||(yield this.sdk.ready,function(t,e,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===r?n.call(t,i):n?n.value=i:e.set(t,i)}(this,_,yield this.sdk.getStorage(),"f"))}))}set(t,e){return W(this,void 0,void 0,(function*(){yield this.ready(),$(this,_,"f").setItem(t,JSON.stringify(e))}))}get(t){return W(this,void 0,void 0,(function*(){yield this.ready();try{return JSON.parse($(this,_,"f").getItem(t)||"null")}catch(t){}}))}remove(t){return W(this,void 0,void 0,(function*(){yield this.ready();try{return $(this,_,"f").removeItem(t)}catch(t){}}))}}_=new WeakMap;var E=i(2665),R=i(2231),T=i(3357),M=i(180);function N(t){return e=this,i=void 0,n=function*(){const e=new A(t.gp,{}),[,,i]=yield Promise.all([e.init(),t.setupStorage([]),t.fetchConfig()]),{progressSaveFormat:r}=i.platformConfig,{isLocalSave:n,isPlatformSave:o,isCloudSave:d}=(0,T.q)(r),c=`gs-db-project-${t.gp.projectId}`;if(d&&t.gp._storage.replaceStorages([new R.Z(c)]),n){if(null!==window.localStorage){const e=new E.Z(t.gp.projectId);e.isLocal=!1,t.gp._storage.replaceStorages([e,new R.Z(c)])}i.platformConfig.progressSaveFormat=M.pQ.Platform,t.gp._storage.setSaveInPlatformStorage(!0)}o&&t.gp._storage.replaceStorages([new I(e),new R.Z(c)]);const u=new a(e,t.gp),h=new s(e);return{appAdapter:new C(e),adsAdapter:h,playerAdapter:u,platformAdapter:new l(e),socialsAdapter:new p(e),paymentsAdapter:new U(e),projectConfig:i}},new((r=void 0)||(r=Promise))((function(t,s){function o(t){try{d(n.next(t))}catch(t){s(t)}}function a(t){try{d(n.throw(t))}catch(t){s(t)}}function d(e){var i;e.done?t(e.value):(i=e.value,i instanceof r?i:new r((function(t){t(i)}))).then(o,a)}d((n=n.apply(e,i||[])).next())}));var e,i,r,n}}}]);