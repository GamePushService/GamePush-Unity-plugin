(self.webpackChunkgame_score_sdk=self.webpackChunkgame_score_sdk||[]).push([[1227],{4034:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});var r,n=function(t,e,i,r){return new(i||(i=Promise))((function(n,s){function o(t){try{u(r.next(t))}catch(t){s(t)}}function a(t){try{u(r.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((r=r.apply(t,e||[])).next())}))};class s{constructor(t,e,i){this.gp=t,this.sdk=e,this.isServerValidation=!0,this.isOneTimeSubscription=!1,this.isNeedAuthorizeBeforePurchase=!1,r.set(this,void 0),function(t,e,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===r?n.call(t,i):n?n.value=i:e.set(t,i)}(this,r,i,"f")}get isSupportsPayments(){var t;return!!(null===(t=this.gp.platform.config.paymentsConfig.configs.web)||void 0===t?void 0:t.activeService)}get isSupportsSubscriptions(){var t;return!!(null===(t=this.gp.platform.config.paymentsConfig.configs.web)||void 0===t?void 0:t.activeService)}mapProducts(t,e){return n(this,void 0,void 0,(function*(){return e}))}consumeAllExpired(t,e,i){return n(this,void 0,void 0,(function*(){}))}fetchPurchases(){return n(this,void 0,void 0,(function*(){return{payload:{},purchases:[]}}))}purchase(t){return n(this,void 0,void 0,(function*(){return yield this.sdk.ready,this.sdk.purchase(t)}))}consume(t){return n(this,void 0,void 0,(function*(){return{}}))}subscribe(t,e){return n(this,void 0,void 0,(function*(){return yield this.sdk.ready,this.sdk.subscribe(t,e)}))}unsubscribe(t,e){return n(this,void 0,void 0,(function*(){return yield this.sdk.ready,this.sdk.unsubscribe(e)}))}}r=new WeakMap},5526:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});var r=function(t,e,i,r){return new(i||(i=Promise))((function(n,s){function o(t){try{u(r.next(t))}catch(t){s(t)}}function a(t){try{u(r.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((r=r.apply(t,e||[])).next())}))};class n{constructor(t,e){this.gp=t,this.sdk=e,this.isServerValidation=!0,this.isOneTimeSubscription=!1,this.isNeedAuthorizeBeforePurchase=!1}get isSupportsPayments(){var t;return!!(null===(t=this.gp.platform.config.paymentsConfig.configs.web)||void 0===t?void 0:t.activeService)}get isSupportsSubscriptions(){var t;return!!(null===(t=this.gp.platform.config.paymentsConfig.configs.web)||void 0===t?void 0:t.activeService)}mapProducts(t,e){return r(this,void 0,void 0,(function*(){return e}))}consumeAllExpired(t,e,i){return r(this,void 0,void 0,(function*(){}))}fetchPurchases(){return r(this,void 0,void 0,(function*(){return{payload:{},purchases:[]}}))}purchase(t){return r(this,void 0,void 0,(function*(){return yield this.sdk.ready,this.sdk.purchase(t)}))}consume(t){return r(this,void 0,void 0,(function*(){return{}}))}subscribe(t,e){return r(this,void 0,void 0,(function*(){return yield this.sdk.ready,this.sdk.subscribe(t,e)}))}unsubscribe(t,e){return r(this,void 0,void 0,(function*(){return yield this.sdk.ready,this.sdk.unsubscribe(e)}))}}},7607:(t,e,i)=>{"use strict";i.d(e,{ZP:()=>u,rD:()=>h,rS:()=>d});var r=i(180),n=i(6558),s=i(5820),o=i(8276),a=function(t,e,i,r){return new(i||(i=Promise))((function(n,s){function o(t){try{u(r.next(t))}catch(t){s(t)}}function a(t){try{u(r.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((r=r.apply(t,e||[])).next())}))};class u{constructor(t,e,i){this.gp=t,this.isStickyAvailable=!1,this.stickyBannerConfig={isOverlapping:!1,height:0},this.isFullscreenAvailable=!1,this.isRewardedAvailable=!1,this.isPreloaderAvailable=!1,this.needToLeaveFullscreenBeforeAds=!1,this.canShowFullscreenBeforeGamePlay=!1,this.customAdsConfig=i.customAdsConfig,this.bannerErrors=this.customAdsConfig.configs.web.banners.map((t=>{return{type:t.type,error:t.adServer&&(e=t,e.adServer!==r.Fl.Adfox&&e.adServer!==r.Fl.Rtb)?`Ad Server [${t.adServer}] is not supported for ${t.type}`:null};var e})),this.isPreloaderAvailable=this.isBannerAvailable(r.$.PRELOADER),this.isStickyAvailable=this.isBannerAvailable(r.$.STICKY),this.isFullscreenAvailable=this.isBannerAvailable(r.$.FULLSCREEN),this.isRewardedAvailable=this.isBannerAvailable(r.$.REWARDED),this.adapter=new s.Z(t,e,this.customAdsConfig,i.tag,i.banners)}isBannerAvailable(t){const e=this.customAdsConfig.configs.web.banners.find((e=>e.type===t));return d(e,this.gp.isMobile)}getErrorForBanner(t){const e=this.bannerErrors.find((e=>e.type===t));return e?e.error:null}showPreloader(){return a(this,void 0,void 0,(function*(){yield this.adapter.ready;const t=this.getErrorForBanner(r.$.PRELOADER);return t?(n.kg.error(t),!1):this.adapter.showPreloader().catch((()=>!1))}))}showFullscreen(){return a(this,void 0,void 0,(function*(){yield this.adapter.ready;const t=this.getErrorForBanner(r.$.FULLSCREEN);return t?(n.kg.error(t),!1):this.adapter.showFullscreen().catch((()=>!1))}))}showRewardedVideo(){return a(this,void 0,void 0,(function*(){yield this.adapter.ready;const t=this.getErrorForBanner(r.$.REWARDED);return t?(n.kg.error(t),!1):this.adapter.showRewardedVideo().catch((()=>!1))}))}showSticky(){return a(this,void 0,void 0,(function*(){yield this.adapter.ready;const t=this.getErrorForBanner(r.$.STICKY);return t?(n.kg.error(t),!1):this.adapter.showSticky().catch((()=>!1))}))}refreshSticky(){return a(this,void 0,void 0,(function*(){return this.showSticky()}))}closeSticky(){return a(this,void 0,void 0,(function*(){yield this.adapter.ready,yield this.adapter.closeSticky().catch((()=>!1))}))}}function h(t,e){var i,n;const s=null===(n=null===(i=t.customAdsConfig)||void 0===i?void 0:i.configs)||void 0===n?void 0:n.web;if(!s)return;const a=t.banners;try{const t=s.banners.find((t=>t.type===r.$.STICKY)),i=a.find((t=>t.type===r.$.STICKY));if(t&&i){const r=(0,o.o)(t,e);i.refreshInterval=Math.max(r.refreshInterval,i.refreshInterval),r.position&&"inherit"!==r.position&&(i.position=r.position)}const n=s.banners.find((t=>t.type===r.$.FULLSCREEN)),u=a.find((t=>t.type===r.$.FULLSCREEN));if(n&&u){const t=(0,o.o)(n,e);u.frequency=Math.max(t.frequency,u.frequency)}}catch(t){console.error("failed to apply external ads settings",t)}}const d=(t,e)=>!!t&&(e?t.enabled&&!!t.bannerId:t.enabledDesktop&&!!t.desktopBannerId)},5820:(t,e,i)=>{"use strict";i.d(e,{Z:()=>c});var r,n,s,o=i(7),a=i(8293),u=i(6558),h=function(t,e,i,r){return new(i||(i=Promise))((function(n,s){function o(t){try{u(r.next(t))}catch(t){s(t)}}function a(t){try{u(r.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((r=r.apply(t,e||[])).next())}))},d=function(t,e,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(t):r?r.value:e.get(t)};class c{constructor(t,e,i,u,c){this.gp=t,this.customAdsConfig=i,this.platformKey=u,this.banners=c,r.add(this),n.set(this,void 0);const v=(0,a._)();this.ready=v.ready,function(t,e,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===r?n.call(t,i):n?n.value=i:e.set(t,i)}(this,n,e,"f"),d(this,n,"f").isConnected?d(this,r,"m",s).call(this):d(this,n,"f").once(o.ie.EXTERNAL_SDK_READY_RESPONSE,(()=>h(this,void 0,void 0,(function*(){return d(this,r,"m",s).call(this)})))),d(this,n,"f").once(o.ie.EXTERNAL_ADS_SDK_READY,(t=>(t.ready||v.abort(t.message),v.done(t.ready),this.gp.ads.showSticky(),this.ready))),d(this,n,"f").on(o.ie.SHOW_PRELOADER,(t=>h(this,void 0,void 0,(function*(){yield l(this.preloaderTransaction,t)})))),d(this,n,"f").on(o.ie.SHOW_FULLSCREEN,(t=>h(this,void 0,void 0,(function*(){yield l(this.fullscreenTransaction,t)})))),d(this,n,"f").on(o.ie.SHOW_REWARDED,(t=>h(this,void 0,void 0,(function*(){yield l(this.rewardedTransaction,t)})))),d(this,n,"f").on(o.ie.SHOW_STICKY,(t=>h(this,void 0,void 0,(function*(){yield l(this.stickyTransaction,t)})))),d(this,n,"f").on(o.ie.CLOSE_STICKY,(t=>h(this,void 0,void 0,(function*(){yield l(this.stickyTransaction,t)}))))}showPreloader(){return h(this,void 0,void 0,(function*(){return yield this.ready,this.preloaderTransaction=(0,a._)(),u.kg.info("Request to show preloader: ",performance.now()),yield d(this,n,"f").send({type:o.W9.REQUEST_TO_SHOW_PRELOADER,payload:{}}),this.preloaderTransaction.ready}))}showFullscreen(){return h(this,void 0,void 0,(function*(){return yield this.ready,this.fullscreenTransaction=(0,a._)(),yield d(this,n,"f").send({type:o.W9.REQUEST_TO_SHOW_FULLSCREEN,payload:{}}),this.fullscreenTransaction.ready}))}showRewardedVideo(){return h(this,void 0,void 0,(function*(){return yield this.ready,this.rewardedTransaction=(0,a._)(),yield d(this,n,"f").send({type:o.W9.REQUEST_TO_SHOW_REWARDED_VIDEO,payload:{}}),this.rewardedTransaction.ready}))}showSticky(){return h(this,void 0,void 0,(function*(){return yield this.ready,this.stickyTransaction=(0,a._)(),yield d(this,n,"f").send({type:o.W9.REQUEST_TO_SHOW_STICKY,payload:{}}),this.stickyTransaction.ready}))}closeSticky(){return h(this,void 0,void 0,(function*(){yield this.ready,yield d(this,n,"f").send({type:o.W9.REQUEST_TO_CLOSE_STICKY,payload:{}})}))}refreshSticky(){return h(this,void 0,void 0,(function*(){return yield this.ready,this.stickyTransaction=(0,a._)(),yield d(this,n,"f").send({type:o.W9.REQUEST_TO_REFRESH_STICKY,payload:{}}),this.stickyTransaction.ready}))}}function l(t,e){return h(this,void 0,void 0,(function*(){if(!t)return;const{success:i,message:r}=e;i?t.done(i):t.abort(r)}))}n=new WeakMap,r=new WeakSet,s=function(){return h(this,void 0,void 0,(function*(){yield d(this,n,"f").send({type:o.ie.PROVIDE_ADS_CONFIG,payload:{customAdsConfig:this.customAdsConfig,platformKey:this.platformKey,isMobile:this.gp.isMobile,projectId:this.gp.projectId,banners:this.banners}})}))}},4037:(t,e,i)=>{"use strict";i.d(e,{Z:()=>u});var r=i(180),n=i(6558),s=i(5820),o=i(7607),a=function(t,e,i,r){return new(i||(i=Promise))((function(n,s){function o(t){try{u(r.next(t))}catch(t){s(t)}}function a(t){try{u(r.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((r=r.apply(t,e||[])).next())}))};class u{constructor(t,e,i){this.gp=t,this.isStickyAvailable=!1,this.stickyBannerConfig={isOverlapping:!1,height:0},this.isFullscreenAvailable=!1,this.isRewardedAvailable=!1,this.isPreloaderAvailable=!1,this.needToLeaveFullscreenBeforeAds=!1,this.canShowFullscreenBeforeGamePlay=!1,this.customAdsConfig=i.customAdsConfig,this.bannerErrors=this.customAdsConfig.configs.web.banners.map((t=>{return{type:t.type,error:t.adServer&&(e=t,e.adServer!==r.Fl.Adfox&&e.adServer!==r.Fl.Rtb)?`Ad Server [${t.adServer}] is not supported for ${t.type}`:null};var e})),this.isPreloaderAvailable=this.isBannerAvailable(r.$.PRELOADER),this.isStickyAvailable=this.isBannerAvailable(r.$.STICKY),this.isFullscreenAvailable=this.isBannerAvailable(r.$.FULLSCREEN),this.isRewardedAvailable=this.isBannerAvailable(r.$.REWARDED),this.adapter=new s.Z(t,e,this.customAdsConfig,i.tag,i.banners)}isBannerAvailable(t){const e=this.customAdsConfig.configs.web.banners.find((e=>e.type===t));return(0,o.rS)(e,this.gp.isMobile)}getErrorForBanner(t){const e=this.bannerErrors.find((e=>e.type===t));return e?e.error:null}showPreloader(){return a(this,void 0,void 0,(function*(){yield this.adapter.ready;const t=this.getErrorForBanner(r.$.PRELOADER);return t?(n.kg.error(t),!1):this.adapter.showPreloader().catch((()=>!1))}))}showFullscreen(){return a(this,void 0,void 0,(function*(){yield this.adapter.ready;const t=this.getErrorForBanner(r.$.FULLSCREEN);return t?(n.kg.error(t),!1):this.adapter.showFullscreen().catch((()=>!1))}))}showRewardedVideo(){return a(this,void 0,void 0,(function*(){yield this.adapter.ready;const t=this.getErrorForBanner(r.$.REWARDED);return t?(n.kg.error(t),!1):this.adapter.showRewardedVideo().catch((()=>!1))}))}showSticky(){return a(this,void 0,void 0,(function*(){if(this.gp.isMobile&&!this.gp.isPortrait)return!1;yield this.adapter.ready;const t=this.getErrorForBanner(r.$.STICKY);return t?(n.kg.error(t),!1):this.adapter.showSticky().catch((()=>!1))}))}refreshSticky(){return a(this,void 0,void 0,(function*(){return this.showSticky()}))}closeSticky(){return a(this,void 0,void 0,(function*(){yield this.adapter.ready,yield this.adapter.closeSticky().catch((()=>!1))}))}}},378:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});var r=i(4340),n=function(t,e,i,r){return new(i||(i=Promise))((function(n,s){function o(t){try{u(r.next(t))}catch(t){s(t)}}function a(t){try{u(r.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((r=r.apply(t,e||[])).next())}))};class s{constructor(){this.canAddShortcut=!1,this.canRequestReview=!1,this.isAlreadyReviewed=!1}addShortcut(){return n(this,void 0,void 0,(function*(){return!1}))}requestReview(){return(0,r.D)()}requestGameUrl(){return n(this,void 0,void 0,(function*(){}))}}},4949:(t,e,i)=>{"use strict";i.d(e,{Z:()=>u});var r=i(2712),n=i(5942),s=i(5572),o=i(180),a=function(t,e,i,r){return new(i||(i=Promise))((function(n,s){function o(t){try{u(r.next(t))}catch(t){s(t)}}function a(t){try{u(r.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((r=r.apply(t,e||[])).next())}))};class u{constructor(t,e){this.sdk=t,this.config=e,this.isExternalLinksAllowed=!0,this.isSecretCodeAuthAvailable=!1,this.type=n.z.PARTNER,this.socialNetworks=r.hc,this.isSupportsImageUploading=!1,this.hasAccountLinkingFeature=!1,this.isSupportsRemoteVariables=!1,this.isSupportsCloudSaves=!1,this.isLogoutAvailable=!1;const i=this.config.authConfig.configs.web,s=!!(null==i?void 0:i.activeService);this.isPikabu=(null==i?void 0:i.implementation)===o.cu.Pikabu,this.authImplementation=null==i?void 0:i.implementation,this.hasIntegratedAuth=this.isPikabu||s,this._hasAuthModal=!this.isPikabu&&s}get tag(){return this.config.tag}getSDK(){return this.sdk}getNativeSDK(){}requestPermissions(){return a(this,void 0,void 0,(function*(){return s.VK}))}uploadImage(){return null}getVariables(){return a(this,void 0,void 0,(function*(){return{}}))}}},899:(t,e,i)=>{"use strict";i.d(e,{Z:()=>d});var r,n,s=i(8293),o=i(7),a=function(t,e,i,r){return new(i||(i=Promise))((function(n,s){function o(t){try{u(r.next(t))}catch(t){s(t)}}function a(t){try{u(r.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((r=r.apply(t,e||[])).next())}))},u=function(t,e,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(t,i):n?n.value=i:e.set(t,i),i},h=function(t,e,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(t):r?r.value:e.get(t)};class d{constructor(t,e,i){this.gp=t,this.sdk=e,this.hasCredetials=!1,this.isAuthorizedAtPlatform=!0,r.set(this,void 0),n.set(this,""),this.user={id:0,name:"",photoSmall:"",photoMedium:"",photoLarge:""},u(this,r,i,"f");const d=(0,s._)();this.ready=d.ready,h(this,r,"f").on(o.ie.FIRST_PROVIDE_DATA,(t=>{this.sdk.gameUrl=t.url,this.platformId=t.customData.platormId})),h(this,r,"f").on(o.ie.PROVIDE_PLAYER,(t=>a(this,void 0,void 0,(function*(){t&&(this.user={id:t.id,name:t.name,photoSmall:t.avatar,photoMedium:t.avatar,photoLarge:t.avatar},u(this,n,t.hash,"f")),d.done()})))),h(this,r,"f").on(o.ie.PLAYER_LOGIN,(t=>a(this,void 0,void 0,(function*(){t&&(this.user={id:t.id,name:t.name,photoSmall:t.avatar,photoMedium:t.avatar,photoLarge:t.avatar},u(this,n,t.hash,"f"),this.hasCredetials=!!t.id&&!!t.hash,yield this.gp.player.sync({silent:!1}),this.gp.player._events.emit("login",!0))})))),h(this,r,"f").on(o.ie.PLAYER_LOGOUT,(()=>a(this,void 0,void 0,(function*(){this.user={id:0,name:"",photoSmall:"",photoMedium:"",photoLarge:""},u(this,n,"","f"),this.gp.player._onLogout(!0)})))),h(this,r,"f").on(o.ie.EXTERNAL_PLAYER_LOGIN,(t=>{var e;null===(e=this.loginTransaction)||void 0===e||e.done({id:(null==t?void 0:t.id)||0,name:(null==t?void 0:t.name)||"",photoSmall:(null==t?void 0:t.avatar)||"",photoMedium:(null==t?void 0:t.avatar)||"",photoLarge:(null==t?void 0:t.avatar)||""}),u(this,n,(null==t?void 0:t.hash)||"","f")}))}get userId(){return String(this.user.id)}getPlayerAuthInfo(){return a(this,void 0,void 0,(function*(){yield this.ready;const t={profileID:this.userId,hash:h(this,n,"f"),platformID:String(this.platformId)};return this.hasCredetials=!!t.profileID&&!!t.hash,t}))}getPlayerContext(){return a(this,void 0,void 0,(function*(){const t=yield this.getPlayerAuthInfo();return{platformData:t,key:t.profileID}}))}loginPlayer(t,e={isAuthModal:!1}){return a(this,void 0,void 0,(function*(){if(!e.isAuthModal&&this.userId)return this.getPlayer();yield h(this,r,"f").send({type:o.W9.REQUEST_TO_LOGIN,payload:{}}),this.loginTransaction=(0,s._)();const t=yield this.loginTransaction.ready;return this.user=Object.assign(Object.assign({},t),{id:Number(t.id)}),t}))}logoutPlayer(){return a(this,void 0,void 0,(function*(){return!1}))}getPlayer(){return a(this,void 0,void 0,(function*(){return yield this.ready,Object.assign({},this.user)}))}publishRecord(t){}isPlatformAvatar(t){return!1}setCredentials(t){}}r=new WeakMap,n=new WeakMap},1545:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});var r=i(8293),n=function(t,e,i,r){return new(i||(i=Promise))((function(n,s){function o(t){try{u(r.next(t))}catch(t){s(t)}}function a(t){try{u(r.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((r=r.apply(t,e||[])).next())}))};class s{constructor(t){this.hasCredetials=!1,this.isAuthorizedAtPlatform=!0,this.user={id:0,name:"",photoSmall:"",photoMedium:"",photoLarge:""},this.token=t.bootParams.query.get("token")||"";try{const t=JSON.parse(atob(this.token.split(".")[1]));this.user={id:t.pikabu_user_id||0,name:t.pikabu_user_name||"",photoSmall:t.pikabu_user_avatar||"",photoMedium:t.pikabu_user_avatar||"",photoLarge:t.pikabu_user_avatar||""}}catch(t){}}get userId(){return String(this.user.id)}getPlayerAuthInfo(){return n(this,void 0,void 0,(function*(){const t=(0,r._)(),e={userId:this.user.id,token:this.token};return this.hasCredetials=!!e.userId&&!!e.token,t.done(e),t.ready}))}getPlayerContext(){return n(this,void 0,void 0,(function*(){const t=yield this.getPlayerAuthInfo();return{platformData:t,key:t.userId}}))}loginPlayer(){return n(this,void 0,void 0,(function*(){throw"not_supported"}))}logoutPlayer(){return n(this,void 0,void 0,(function*(){return!1}))}getPlayer(){return n(this,void 0,void 0,(function*(){return Object.assign({},this.user)}))}publishRecord(t){}isPlatformAvatar(t){return t.includes(".pikabu.ru")}setCredentials(t){}}},3521:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var r=i(8293),n=i(6558),s=i(6390),o=i(209),a=i(9503),u=function(t,e,i,r){return new(i||(i=Promise))((function(n,s){function o(t){try{u(r.next(t))}catch(t){s(t)}}function a(t){try{u(r.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((r=r.apply(t,e||[])).next())}))};class h{constructor(t,e){this.gp=t,this.sdk=e,this.userId="",this.gameUrl="";try{const t=new URL(window.location.href),e=t.searchParams.get("_gpParams"),i=t.searchParams.get("_wl_lang");this.lang=Object.values(a.Uo).includes(i)?i:null,e&&(this.shareParams=o.Z.parse(e))}catch(t){n.kg.error(t)}}init({payload:t}={}){var e;return u(this,void 0,void 0,(function*(){const i=(0,r._)();return this.ready=i.ready,this.bootParams={externalVersion:(null==t?void 0:t.version)||1,query:new URLSearchParams((null===(e=null==t?void 0:t.config)||void 0===e?void 0:e.q)||"")},this.gameUrl=this.bootParams.query.get("game_url")||"",i.done(this),i.ready}))}get appUrl(){return this.gameUrl?this.gameUrl:(0,s.T)()}purchase(t){return u(this,void 0,void 0,(function*(){return this.sdk.makePurchase(t)}))}subscribe(t,e){return u(this,void 0,void 0,(function*(){if(!this.gp.player.isLoggedIn)throw new Error("subscribe failed");return 0==(null==e?void 0:e.subscribed)&&Date.parse(null==e?void 0:e.expiredAt)>Date.parse(this.gp.serverTime)?this.sdk.resumeSubscription(e):this.sdk.makePurchase(t)}))}unsubscribe(t){return u(this,void 0,void 0,(function*(){const e=(0,r._)(),i=yield this.sdk.unsubscribe(t);return i.purchase.subscribed?e.abort("unsubscribe failed"):e.done({subscription_id:i.purchase._id}),e.ready}))}addShareParamsToUrl(t,e){return o.Z.addShareParamsToUrl(t,{_gpParams:o.Z.stringify(e)})}makeShareUrl(t){return this.addShareParamsToUrl(this.gp.app.url,t)}getShareParam(t){return this.shareParams?this.shareParams[t]:""}}},6944:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});var r=i(8293),n=function(t,e,i,r){return new(i||(i=Promise))((function(n,s){function o(t){try{u(r.next(t))}catch(t){s(t)}}function a(t){try{u(r.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}u((r=r.apply(t,e||[])).next())}))};class s{constructor(t){this.gp=t}makePurchase(t){return n(this,void 0,void 0,(function*(){const e=(0,r._)();try{yield this.gp.loadOverlay(),yield this.gp.overlay.openProductPurchase(t),e.done({product:t})}catch(t){e.abort(t)}return e.ready}))}unsubscribe(t){return n(this,void 0,void 0,(function*(){return yield this.gp._services.paymentsService.cancelSubscription({id:t.productId,payload:t.payload})}))}resumeSubscription(t){return n(this,void 0,void 0,(function*(){return yield this.gp._services.paymentsService.resumeSubscription({id:t.productId,payload:t.payload})}))}}},9020:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});class r{constructor(t){this.sdk=t,this.isSupportsShare=!0,this.isSupportsNativeShare=!1,this.isSupportsNativePosts=!1,this.isSupportsNativeInvite=!1,this.isSupportsNativeCommunityJoin=!1,this.canJoinCommunity=!1,this.isSupportShareParams=!0}get shareParams(){return this.sdk.shareParams}share(t){return Promise.resolve(!1)}post(t){return Promise.resolve(!1)}invite(t){return Promise.resolve(!1)}getCommunityLink(t){return t}joinCommunity(){return Promise.resolve(!1)}addShareParamsToUrl(t,e){return this.sdk.addShareParamsToUrl(t,e)}makeShareUrl(t){return this.sdk.makeShareUrl(t)}getShareParam(t){return this.sdk.getShareParam(t)}}}}]);